define("wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReferenceTip/lemmaReferenceTip",function(e,t,n){var i=e("wiki-common:widget/lib/jquery/jquery"),o=e("wiki-common:widget/util/string"),l=function(e){var t=['<div class="reference-tip">',"<table><tr>",'<td class="content"></td>','<td class="title" valign="middle">参考资料</td>',"</tr></table>",'<em class="triangle-bg"></em>','<em class="triangle-border"></em>',"</div>"].join(""),n=e,l=i(t),s=this,r=function(e){var t=e.text().replace("[","").replace("]","");t=t.split("-");for(var n=parseInt(t[0]),i=parseInt(t[t.length-1]),o=[],l=n;i>=l;l++)o.push(l);return o};this.display=function(e){for(var t=r(e),s=e.offset(),a=[],u=0;u<t.length;u++){var c=i("[id='reference-["+t[u]+"]-"+n.subLemmaId+"-wrap']"),m=c.find(".text"),d=c.find(".site"),f=(m.length>0?m.text().substr(0,48):"")+(d.length>0?d.text():"");a.push((t.length>1?"["+t[u]+"] ":"")+f)}var h=a.join("\n");h=o.encodeHTML(h),l.find(".content").html(h),l.css({left:s.left-10,top:s.top-l.height()-15}),this.show()},this.show=function(){l.show()},this.hide=function(){l.hide()};var a=function(){var e=null;l.on("mosueover",function(){e&&(clearTimeout(e),e=null),s.show()}).on("mouseout",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){s.hide()},200)}),i(document.body).on("mouseover","sup",function(t){if(!i(this).hasClass("normal")){e&&(clearTimeout(e),e=null);var n=i(t.target);s.display(n)}}).on("mouseout","sup",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){s.hide()},200)}),l.appendTo(i(document.body))};a()};n.exports=l});