define("wiki-common:widget/lib/letvPlayer/letvPlayer",function(t,e,i){function o(t){var e={yuanhua:"yuanhua",1300:"super",800:"high",350:"low"};return e.hasOwnProperty(t)?e[t]:t}function n(t){var e={yuanhua:"yuanhua","super":"1300",high:"800",low:"350"};return e.hasOwnProperty(t)?e[t]:t}function s(){var t="samsung-sm-n9009__weibo__5.1.2__android__android4.3;HUAWEI MT1-T00 Build/HuaweiMT1-T00;cpqb;360zqb;p6-t00;sm-n9008;sm-;samsung;huawei;android.+chrome".split(";");switch(a.getDevice()){case"ipad":case"iphone":return"ios";case"androidPad":case"androidPhone":case"android":if("mp4"==a.getLocal("playType"))break;for(var e=navigator.userAgent.toLowerCase(),i=0;i<t.length;i++)if(-1!=e.indexOf(t[i].toLowerCase()))return"mp4";if(/samsung/i.test(e)&&/weibo/i.test(e))break;if(""==document.createElement("video").canPlayType("application/x-mpegURL"))break;return"ios"}return"mp4"}if("undefined"==typeof r)var r={},r={shareObj:function(t,e){"undefined"==typeof window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin.hasOwnProperty("STK")||(window.CloudSdkPlugin.STK={}),window.CloudSdkPlugin.STK[t]=e},getObj:function(t){if("undefined"==typeof window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),!window.CloudSdkPlugin.hasOwnProperty("STK"))throw Error("no "+t+" Obj");return window.CloudSdkPlugin.STK[t]},creatPlugin:function(t,e){"undefined"==typeof window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin[t]=e},getPlugin:function(t,e){if("STK"==t)throw Error(t+" is not support");window.CloudSdkPlugin&&"undefined"!=typeof window.CloudSdkPlugin[t]?e(window.CloudSdkPlugin[t]):a.getJS(r.PluginStack[t],function(){e(window.CloudSdkPlugin[t])},function(){e(null)},this,"utf-8")}};r.shareObj("common.SOTool",r);var a=function(){function t(t){for(var e=[{name:"ie",test:/msie/},{name:"opera",test:/opera/},{name:"firefox",test:/firefox/},{name:"safari",test:/safari.*(?!chrome)/},{name:"chrome",test:/chrome/},{name:"wph",test:/windows phone/},{name:"ps",test:/playstation/},{name:"uc",test:/ucbrowser|ucweb/},{name:"ps",test:/playstation/},{name:"xiaomi",test:/xiaomi/},{name:"qq",test:/qqbrowser/},{name:"weixin",test:/micromessenger/},{name:"360",test:/360browser/},{name:"baidu",test:/baidu/},{name:"qqwebview",test:/ qq/},{name:"sougou",test:/sougou/},{name:"liebao",test:/liebaofast/},{name:"letv",test:/eui browser/}],i="un",o=0;o<e.length;o++){var n=e[o];n.test.test(t)&&(i=n.name)}return i}function e(t){var e="Win32"==navigator.platform||"Windows"==navigator.platform,i="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(i)return"mac";if(e){if(-1<t.indexOf("windows nt 5.0")||-1<t.indexOf("windows 2000"))return"win2000";if(-1<t.indexOf("windows nt 5.1")||-1<t.indexOf("windows XP"))return"winXP";if(-1<t.indexOf("windows nt 5.2")||-1<t.indexOf("windows 2003"))return"win2003";if(-1<t.indexOf("windows nt 6.0")||-1<t.indexOf("windows vista"))return"winVista";if(-1<t.indexOf("windows nt 6.1")||-1<t.indexOf("windows 7"))return"win7"}return/android/.test(t)?"android":t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)||t.match(/iphone/)||t.match(/ipad/)?"ios":"X11"!=navigator.platform||e||i?-1<String(navigator.platform).indexOf("Linux")?"linux":"un":"unix"}var i=navigator.userAgent.toLowerCase(),o={br:"",device:"",ver:"",params:null,os:""};return{br:o,getOs:function(){return""==o.os&&(o.os=e(i)),o.os},getUrlParams:function(t){if(null==o.params){var e=window.location.search,i={};if(-1!=e.indexOf("?"))for(var e=e.substr(1).split("&"),n=0;n<e.length;n++){var s=e[n].substr(0,e[n].indexOf("=")),r=e[n].substr(e[n].indexOf("=")+1);i[s]=r}o.params=i}return o.params&&o.params.hasOwnProperty(t)?o.params[t]:!1},getDevice:function(){if(""==o.device){var t;t:{t=[{name:"wph",test:/windows phone/},{name:"ipad",test:/ipad/},{name:"iphone",test:/iphone/},{name:"androidPad",test:/(?!.*mobile)android/},{name:"androidPhone",test:/android.*mobile/},{name:"android",test:/android/},{name:"pc",test:/windows/}];for(var e=0;e<t.length;e++){var n=t[e];if(n.test.test(i)){t=n.name;break t}}t="un"}o.device=t}return o.device},getBrowser:function(){return""==o.br&&(o.br=t(i)),o.br},getBrowserVersion:function(){if(""==o.br&&(o.br=t(i)),""==o.ver){var e,n={};(e=i.match(/msie ([\d.]+)/))?n.msie=e[1]:(e=i.match(/firefox\/([\d.]+)/))?n.firefox=e[1]:(e=i.match(/360browser/))?n.b360=e[1]?e[1]:"-":(e=i.match(/qqbrowser\/([\d.]+)/))?n.bqq=e[1]:(e=i.match(/ucbrowser\/([\d.]+)/))?n.buc=e[1]:(e=i.match(/baidubrowser\/([\d.]+)/))?n.bbaidu=e[1]:(e=i.match(/sogoumobilebrowser\/([\d.]+)/))?n.bsgm=e[1]:(e=i.match(/liebaofast\/([\d.]+)/))?n.blbfast=e[1]:(e=i.match(/mb2345browser\/([\d.]+)/))?n.b2345=e[1]:(e=i.match(/4g explorer\/([\d.]+)/))?n.b4g=e[1]:(e=i.match(/huohoubrowser\/([\d.]+)/))?n.bhuohou=e[1]:(e=i.match(/maxthon[\/ ]([\d.]+)/))?n.maxthon=e[1]:(e=i.match(/(opera)|(opr)\/([\d.]+)/))?n.opera=e[3]:(e=i.match(/chrome\/([\d.]+)/))?n.chrome=e[1]:(e=i.match(/version\/([\d.]+).*safari/))?n.safari=e[1]:n.other="-",e="";for(var s in n)e=n[s];o.ver=e}return o.br+o.ver},now:Date.now||function(){return+new Date},getJS:function(t,e,i,o,n,s){if("undefined"!=typeof t){var r,a=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=document.createElement("script");l.type="text/javascript",n&&(l.charset=n),l.onload=l.onreadystatechange=function(){l.readyState&&"loaded"!=l.readyState&&"complete"!=l.readyState||(l=l.onreadystatechange=l.onload=l.onerror=null,clearTimeout(r),"function"==typeof e&&e.call(o))},l.onerror=function(){l=l.onload=l.onreadystatechange=l.onerror=null,clearTimeout(r),"function"==typeof i&&i.call(o)},l.src=t,a.appendChild(l),s||(s=1e4),r=setTimeout(function(){clearTimeout(r),"function"==typeof i&&i()},s)}},getJSON:function(t,e,i,o,n,s){var r,a=this.now(),l="letvcloud"+a+Math.floor(100*Math.random()),d="$1"+l+"$2",h=0,p=0,c=this,u=-1,f=document.head||document.getElementsByTagName("head")[0]||document.documentElement;/_r=/i.test(t)||(t+="&callback=?"),t=t.replace(/(\=)\?(&|$)|\?\?/i,d),o=o||5e3;var y=n||2,g=s||1e3;window[l]=function(t){m(),window[l]=null,u=-1,e.call(this,t,{responseTime:c.now()-a,retryCount:h})};var m=function(){clearTimeout(p),r&&r.parentNode&&(f.removeChild(r),r.onload=r.onreadystatechange=null,r.onerror=null,r=void 0)},v=function(){m(),h>=y?(clearTimeout(p),window[l]=null,i&&i.call(this,null,{responseTime:c.now()-a,retryCount:h,error:u})):setTimeout(E,g)},E=function(){m(),h++,t=t.replace(/&_r=[\d|\?]+/i,"&_r="+h),r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t),r.setAttribute("charset","utf-8"),r.onload=r.onreadystatechange=function(){r.onload=r.onreadystatechange=null,clearTimeout(p)},f.insertBefore(r,f.firstChild),u=1,p=setTimeout(v,o)};E()},getJSONbyAjax:function(t,e,i,o,n,s){var r,a=this.now(),l=0,d=this,h=-1;o=o||5e3;var p=n||2,c=s||1e3,u=function(){clearTimeout(0),r&&(r.onreadystatechange=null)},f=function(){u(),l>=p?(clearTimeout(0),i&&i.call(this,null,{responseTime:d.now()-a,retryCount:l,error:h})):setTimeout(y,c)},y=function(){u(),l++,r=new XMLHttpRequest,r.timeout=o,r.onreadystatechange=function(t){4==r.readyState&&(200==r.status?(t=r.responseText,u(),h=-1,e.call(this,t,{responseTime:d.now()-a,retryCount:l})):f())},r.ontimeout=f,r.open("GET",t,!0),r.send(),h=1};y()},creatUuid:function(){var t,e,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];for(e=16,t=0;32>t;t++)o[t]=i[0|Math.random()*e];return o.join("")},objectParseToString:function(t){if(null==t)return"";var e,i="",o=0;for(e in t)i=o>0?i+("&"+e+"="+t[e]):i+(e+"="+t[e]),o++;return i},cookie:function(t,e,i){if("undefined"==typeof e){if(e=null,document.cookie&&""!=document.cookie)for(i=document.cookie.split(";"),o=0;o<i.length;o++)if(n=i[o],n.substring(0,t.length+1)==t+"="){e=decodeURIComponent(n.substring(t.length+1));break}return e}i=i||{},null===e&&(e="",i.expires=-1);var o="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(o=new Date,o.setTime(o.getTime()+864e5*i.expires)):o=i.expires,o="; expires="+o.toUTCString());var n=i.path?"; path="+i.path:"",s=i.domain?"; domain="+i.domain:"";return i=i.secure?"; secure":"",document.cookie=[t,"=",encodeURIComponent(e),o,n,s,i].join(""),null},setLocal:function(t,e,i){if(window.localStorage)try{localStorage.setItem(t,e)}catch(o){}this.cookie(t,e,i)},getLocal:function(t){if(window.localStorage)try{if(localStorage.getItem(t))return localStorage.getItem(t)}catch(e){}return this.cookie(t)},num2Time:function(t){var e;return e=10>parseInt(t/60)?"0"+parseInt(t/60)+":":parseInt(t/60)+":",t=10>parseInt(t%60)?"0"+parseInt(t%60):parseInt(t%60)+"",e+t},clone:function(t){var e,i,o;if("object"!=typeof t||null===t)return t;if(t instanceof Array)for(e=[],i=0,o=t.length;o>i;i++)e[i]="object"==typeof t[i]&&null!=t[i]?arguments.callee(t[i]):t[i];else for(i in e={},t)e[i]="object"==typeof t[i]&&null!=t[i]?arguments.callee(t[i]):t[i];return e},isHttps:function(){try{return"https:"==window.location.protocol}catch(t){}return!1},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},addUrlParams:function(t,e){for(var i=0;i<t.length;i++){var o,n=t[i];for(o in e)-1==n.indexOf("&"+o+"=")&&-1==n.indexOf("?"+o+"=")&&(n=-1!=n.indexOf("?")?n+("&"+o+"="+e[o]):n+("?"+o+"="+e[o]));t[i]=n}},bindFun:function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}}}();r.shareObj("common.videoSdkTool",a),a.checkPano=function(){try{var t=document.createElement("canvas");if(window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl")))switch(a.getDevice()){case"androidPad":case"androidPhone":case"android":if("chrome"==a.getBrowser()||"firefox"==a.getBrowser())return!0;break;case"pc":return!0}}catch(e){}return!1},r.shareObj("common.videoSdkTool",a);var l=window,d=document,h="playNewId getVideoSetting getVideoTime pauseVideo resumeVideo seekTo replayVideo closeVideo setVolume shutDown startUp getBufferPercent setDefinition getDefinition getDefaultDefinition getDefinitionList setVideoPercent getVideoPercent setVideoScale getVideoScale resetVideoScale fullVideoScale setVideoRect getLoadPercent getDownloadSpeed getPlayRecord getPlayState setVideoColor getVideoColor getVersion setAutoReplay feedback getLog getServerTime callFlash".split(" "),p={decode:function(t){var e,i,o,n,s,r=0,a=0;n="";var l=[];if(!t)return t;t+="";do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(t.charAt(r++)),o=e<<18|i<<12|n<<6|s,e=o>>16&255,i=o>>8&255,o&=255,l[a++]=64==n?String.fromCharCode(e):64==s?String.fromCharCode(e,i):String.fromCharCode(e,i,o);while(r<t.length);return n=l.join("")},encode:function(t){var e,i,o,n,s=0,r=0,a="",a=[];if(!t)return t;t=this.utf8_encode(t+"");do e=t.charCodeAt(s++),i=t.charCodeAt(s++),o=t.charCodeAt(s++),n=e<<16|i<<8|o,e=n>>18&63,i=n>>12&63,o=n>>6&63,n&=63,a[r++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n);while(s<t.length);switch(a=a.join(""),t.length%3){case 1:a=a.slice(0,-2)+"==";break;case 2:a=a.slice(0,-1)+"="}return a}},c=function(){function t(t,e,i,o,s,r){return t=n(n(e,t),n(o,r)),n(t<<s|t>>>32-s,i)}function e(e,i,o,n,s,r,a){return t(i&o|~i&n,e,i,s,r,a)}function i(e,i,o,n,s,r,a){return t(i&n|o&~n,e,i,s,r,a)}function o(e,i,o,n,s,r,a){return t(o^(i|~n),e,i,s,r,a)}function n(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}return{hash:function(s){for(var r=[],a=0;a<8*s.length;a+=8)r[a>>5]|=(255&s.charCodeAt(a/8))<<a%32;s=8*s.length,r[s>>5]|=128<<s%32,r[(s+64>>>9<<4)+14]=s,s=1732584193;for(var a=-271733879,l=-1732584194,d=271733878,h=0;h<r.length;h+=16){var p=s,c=a,u=l,f=d;s=e(s,a,l,d,r[h+0],7,-680876936),d=e(d,s,a,l,r[h+1],12,-389564586),l=e(l,d,s,a,r[h+2],17,606105819),a=e(a,l,d,s,r[h+3],22,-1044525330),s=e(s,a,l,d,r[h+4],7,-176418897),d=e(d,s,a,l,r[h+5],12,1200080426),l=e(l,d,s,a,r[h+6],17,-1473231341),a=e(a,l,d,s,r[h+7],22,-45705983),s=e(s,a,l,d,r[h+8],7,1770035416),d=e(d,s,a,l,r[h+9],12,-1958414417),l=e(l,d,s,a,r[h+10],17,-42063),a=e(a,l,d,s,r[h+11],22,-1990404162),s=e(s,a,l,d,r[h+12],7,1804603682),d=e(d,s,a,l,r[h+13],12,-40341101),l=e(l,d,s,a,r[h+14],17,-1502002290),a=e(a,l,d,s,r[h+15],22,1236535329),s=i(s,a,l,d,r[h+1],5,-165796510),d=i(d,s,a,l,r[h+6],9,-1069501632),l=i(l,d,s,a,r[h+11],14,643717713),a=i(a,l,d,s,r[h+0],20,-373897302),s=i(s,a,l,d,r[h+5],5,-701558691),d=i(d,s,a,l,r[h+10],9,38016083),l=i(l,d,s,a,r[h+15],14,-660478335),a=i(a,l,d,s,r[h+4],20,-405537848),s=i(s,a,l,d,r[h+9],5,568446438),d=i(d,s,a,l,r[h+14],9,-1019803690),l=i(l,d,s,a,r[h+3],14,-187363961),a=i(a,l,d,s,r[h+8],20,1163531501),s=i(s,a,l,d,r[h+13],5,-1444681467),d=i(d,s,a,l,r[h+2],9,-51403784),l=i(l,d,s,a,r[h+7],14,1735328473),a=i(a,l,d,s,r[h+12],20,-1926607734),s=t(a^l^d,s,a,r[h+5],4,-378558),d=t(s^a^l,d,s,r[h+8],11,-2022574463),l=t(d^s^a,l,d,r[h+11],16,1839030562),a=t(l^d^s,a,l,r[h+14],23,-35309556),s=t(a^l^d,s,a,r[h+1],4,-1530992060),d=t(s^a^l,d,s,r[h+4],11,1272893353),l=t(d^s^a,l,d,r[h+7],16,-155497632),a=t(l^d^s,a,l,r[h+10],23,-1094730640),s=t(a^l^d,s,a,r[h+13],4,681279174),d=t(s^a^l,d,s,r[h+0],11,-358537222),l=t(d^s^a,l,d,r[h+3],16,-722521979),a=t(l^d^s,a,l,r[h+6],23,76029189),s=t(a^l^d,s,a,r[h+9],4,-640364487),d=t(s^a^l,d,s,r[h+12],11,-421815835),l=t(d^s^a,l,d,r[h+15],16,530742520),a=t(l^d^s,a,l,r[h+2],23,-995338651),s=o(s,a,l,d,r[h+0],6,-198630844),d=o(d,s,a,l,r[h+7],10,1126891415),l=o(l,d,s,a,r[h+14],15,-1416354905),a=o(a,l,d,s,r[h+5],21,-57434055),s=o(s,a,l,d,r[h+12],6,1700485571),d=o(d,s,a,l,r[h+3],10,-1894986606),l=o(l,d,s,a,r[h+10],15,-1051523),a=o(a,l,d,s,r[h+1],21,-2054922799),s=o(s,a,l,d,r[h+8],6,1873313359),d=o(d,s,a,l,r[h+15],10,-30611744),l=o(l,d,s,a,r[h+6],15,-1560198380),a=o(a,l,d,s,r[h+13],21,1309151649),s=o(s,a,l,d,r[h+4],6,-145523070),d=o(d,s,a,l,r[h+11],10,-1120210379),l=o(l,d,s,a,r[h+2],15,718787259),a=o(a,l,d,s,r[h+9],21,-343485551),s=n(s,p),a=n(a,c),l=n(l,u),d=n(d,f)}for(r=[s,a,l,d],s="",a=0;a<4*r.length;a++)s+="0123456789abcdef".charAt(r[a>>2]>>a%4*8+4&15)+"0123456789abcdef".charAt(r[a>>2]>>a%4*8&15);return s}}}(),u={getTemplate:function(t,e,i,o){"undefined"!=typeof i&&(i=i.replace(/{#}/g,o),e=e.replace(/{#}/g,o),u.loadCss(i)),i=(new Date).getTime(),o=e.match(/#{[a-z_A-Z0-9]{1,}}/g)||[];for(var n=[],s=0;s<o.length;s++){var r=o[s].replace(/^#{?|}$/g,"");e=e.replace(o[s],r+i),n.push(r)}for(t.innerHTML=e,s=0;s<n.length;s++)r=n[s],t[r]=u.$E(r+i);return n},loadCss:function(t){var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=t,e.appendChild(i)},$E:function(t){return t="string"==typeof t?document.getElementById(t):t,null!=t?t:null},$C:function(t){return document.createElement(t)},hasClassName:function(t,e){if(t){var i=t.className;return 0==i.length?!1:i==e||i.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))?!0:!1}},addClassName:function(t,e){if(t){var i=t.className;0==i.length?t.className=i:i==e||i.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))||(t.className=i+" "+e)}},removeClassName:function(t,e){if(t){var i=t.className;0!=i.length&&(i==e?t.className="":i.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))&&(t.className=i.replace(new RegExp("(^|\\s)"+e+"(\\s|$)")," ")))}},addEvent:function(t,e,i){if(-1!=e.indexOf(",")){e=e.split(",");for(var o=0,n=e.length;n>o;o++){var s=e[o];if(""==s)break;t.attachEvent?t.attachEvent("on"+s,i):t.addEventListener(s,i,!1)}}else t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i,!1)},removeEvent:function(t,e,i){if(t=this.$E(t),null!=t&&"function"==typeof i&&"undefined"!=typeof e)if(-1!=e.indexOf(",")){e=e.split(",");for(var o=0,n=e.length;n>o;o++){var s=e[o];if(""==s)break;t.addEventListener?t.removeEventListener(s,i,!1):t.attachEvent&&t.detachEvent("on"+s,i)}}else t.addEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)},getPos:function(t){if(t=this.$E(t),t.getBoundingClientRect){var e="CSS1Compat"==document.compatMode?document.documentElement:document.body;return t=t.getBoundingClientRect(),{x:t.left+e.scrollLeft,y:t.top+e.scrollTop}}for(e=y_=0;t.offsetParent;)e+=t.offsetLeft,y_+=t.offsetTop,t=t.offsetParent;return e+=t.offsetLeft,y_+=t.offsetTop,{x:e,y:y_}},getMousePoint:function(t){var e="createTouch"in document,i=y=0,o=document.documentElement,n=document.body;return t||(t=window.event),window.pageYOffset?(i=window.pageXOffset,y=window.pageYOffset):(i=(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),y=(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),e?(t=t.touches.item(0),i=t.pageX,y=t.pageY):(i+=t.clientX,y+=t.clientY),{x:i,y:y}},preventDefault:function(t){t?t.preventDefault():window.event.returnValue=!1},turnEvent:function(t){var e={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mouseover:"touchstart",mouseout:"-",click:"touchstart"};return u.isSupportsTouches()&&e.hasOwnProperty(t)?e[t]:t},isSupportsTouches:function(){return"createTouch"in document},drag:function(t,e){var i="createTouch"in document,o=u.turnEvent("mousedown"),n=u.turnEvent("mousemove"),s=u.turnEvent("mouseup");"string"==typeof t&&(t=document.getElementById(t)),t.orig_index=t.style.zIndex,t.startX=0,t.startY=0,t["on"+o]=function(o){function r(o){return o||(o=window.event),i?(o=o.touches.item(0),l=o.pageX-p,d=o.pageY-c):(l=o.pageX?o.pageX-p:o.clientX+document.body.scrollLeft-p,d=o.pageY?o.pageY-c:o.clientY+document.body.scrollTop-c),l=y.x+l,d=y.x+d,f&&(l<f.x?l=f.x:l>f.x+f.w&&(l=f.x+f.w),d<f.y?d=f.y:d>f.y+0+f.h&&(d=f.y+f.h)),t.style.left=l+"px",t.style.top=d+"px",e.onMove&&e.onMove((parseInt(t.style.left)-f.x)/f.w),!1}function a(){t.releaseCapture?t.releaseCapture():window.captureEvents&&window.captureEvents(O.MOUSEMOVE|O.MOUSEUP),u.removeEvent(h,n,r),u.removeEvent(h,s,a),t.style.zIndex=t.orig_index,e.onUp&&e.onUp((parseInt(t.style.left)-f.x)/f.w)}var l,d,h=document;d=l=void 0;var p,c,f;this.style.zIndex=1e4,e.rect&&(f=e.rect()),o||(o=window.event),o.preventDefault(),i?(o=o.touches.item(0),p=o.pageX,c=o.pageY):(p=o.clientX+h.body.scrollLeft,c=o.clientY+h.body.scrollTop);var y={x:parseInt(t.offsetLeft),y:parseInt(t.offsetTop)};return h.ondragstart="return false;",h.onselectstart="return false;",h.onselect="document.selection.empty();",t.setCapture?t.setCapture():window.captureEvents&&window.captureEvents(O.MOUSEMOVE|O.MOUSEUP),e.onDown&&e.onDown((parseInt(t.style.left)-f.x)/f.w),u.addEvent(h,n,r),u.addEvent(h,s,a),!1}},fullScreen:function(t){return t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.oRequestFullscreen?t.oRequestFullscreen():void 0},isFullScreen:function(){return document.webkitIsFullScreen||document.fullscreen||document.mozFullScreen||document.msFullscreenElement?!0:!1},cancelFullScreen:function(){document.cancelFullscreen?document.cancelFullscreen():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen&&element.webkitCancelFullScreen()},supportFullScreen:function(){var t=document.documentElement;return"requestFullscreen"in t||"mozRequestFullScreen"in t&&document.mozFullScreenEnabled||"webkitRequestFullscreen"in t||"msRequestFullscreen"in t},getClientWidth:function(){return document.body.clientWidth}};r.shareObj("common.UiTool",u);var f={isString:function(t){return"string"==typeof t},stringToJson:function(t){if(!this.isString(t))return t;try{return window.JSON.parse(t)}catch(e){return{}}},isJson:function(t){return t&&"object"==typeof t&&"Object"===t.constructor?!0:!1},jsonToString:function(t){var e="";try{e=window.JSON.stringify(t)}catch(i){e=i}return e}},g=function(){var t="",e=[];return{log:function(i,o,n){if(o="undefined"!=typeof o?"["+o.constructor.name+"]":"-",n="undefined"!=typeof n?n:"-",t!=i)try{var s=new Date,r="["+s.getFullYear()+"-"+s.getMonth()+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+":"+s.getMilliseconds()+"]";if(e.push(r+i+"  target-->"+o),1e3<e.length&&e.shift(),(-1!=window.location.href.indexOf("#dSDK=1")||"file"==window.location.href.substr(0,4).toLocaleLowerCase())&&window.console&&window.console.log(i,o,n,r),-1!=window.location.href.indexOf("#dSDK=2")){if(document.getElementById("log"))var a=document.createElement("DIV");else{var l=document.createElement("DIV");l.id="log",document.body.appendChild(l),a=document.createElement("DIV")}a.innerHTML=i+o+r,document.getElementById("log").appendChild(a),t=i}}catch(d){}},getLog:function(){return e.join("<br>\r\n")}}}();g.log("js 加载成功  ua:"+window.navigator.userAgent);var m=function(){var t=document.createElement("DIV");t.style.cssText="width:85%;height:80%;position:fixed;left:0px;top:0px;z-index: 3000;background-color:rgba(255, 255, 255, 1);";var e=document.createElement("IFRAME");e.name="submit",e.style.cssText="display:none;position:absolute;";var i=document.createElement("form");return{print:function(e,i){t.innerHTML='<div style="width:100%;"><span>用户id:</span><input type="text" style="width:300px;"><input style="float:right;" type="button" value="关闭"></div><textarea class="input" style="width: 100%;height: 100%"  placeholder="Once upon a time..."></textarea>',document.body.appendChild(t),t.style.display="",t.getElementsByTagName("textarea")[0].innerHTML=e;var o=t.getElementsByTagName("input")[0];t.getElementsByTagName("input")[1].onclick=function(){t.style.display="none"},o.value=i},report:function(t,o){document.body.appendChild(e),i.innerHTML="",i.action=t,i.method="post",i.target="submit",i.style.display="none";for(var n in o){var s=document.createElement("textarea");s.name=n,s.value=o[n],i.appendChild(s)}document.body.appendChild(i),i.submit()}}}(),v={isSupportFlash:!1,isEmdbed:!1,num:0,check:function(t){var e="";if("undefined"!=typeof window.ActiveXObject)try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(i){}if(window.navigator.plugins&&window.navigator.plugins["Shockwave Flash"])try{e=window.navigator.plugins["Shockwave Flash"].description,this.isEmdbed=!0}catch(o){}""==e&&(this.isSupportFlash=!1);for(var e=e.split(/\s+/),n=0,s=e.length;s>n;n++)parseInt(e[n])>t&&(this.isSupportFlash=!0);return this.isSupportFlash},getPlayer:function(t){return this.isEmdbed?document[t]||window[t]:document.getElementById(t)},create:function(t,e,i){var o="cloudPlayer"+(new Date).getTime()+this.num;this.num++;var n,s={bgcolor:"#000000",allowscriptaccess:"always",wmode:"Opaque",width:"100%",height:"100%",align:"middle",quality:"high",allowFullScreen:!0,version:10};for(n in e)s[n]=e[n];if(s.flashvars=i,e="",this.check(s.version)){if(this.isEmdbed)for(n in i=["<embed name='"+o+"'src='"+s.url+"' pluginspage='http://www.macromedia.com/go/getflashplayer' type='application/x-shockwave-flash' width='"+s.width+"' height='"+s.height+"' "," />"],e="",s)"width"!=n&&"height"!=n&&"url"!=n&&(e+=n+"='"+s[n]+"' ");else for(n in e="",i=["<object id='"+o+"' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'codebase='http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,45,0' type='application/x-shockwave-flash' width='"+s.width+"' height='"+s.height+"'><param name='movie' value='"+s.url+"'/>","</object>"],s)"width"!=n&&"height"!=n&&"url"!=n&&(e+="<param name='"+n+"' value='"+s[n]+"'/>");e=i.join(e)}else e='<div style="width:'+s.width+"px; height:"+s.height+'px; text-align:center;"><span style="line-height:200%; font-size:18px">安装或者更新版本不小于<b style="color:red">'+s.version+'</b>的flash播放器, 请点击<a href="http://get.adobe.com/cn/flashplayer/" target="_blank">这里</a>安装</span></div>';return"string"==typeof t&&""!=t&&document.getElementById(t)?document.getElementById(t).innerHTML=e:document.write(e),o}},E=function(){var t={};return{inherits:function(t,e){function i(){}try{i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.prototype.superClass=e.prototype}catch(o){}},provideClass:function(t,e){var i=t.split(".");if(1<i.length)for(var o=0;o<i.length-1;o++){var n=i[o];last.hasOwnProperty(n)||(last[n]={}),last=last[n]}last[i[i.length-1]]=e},importClass:function(e){for(var i=e.split("."),o=t,n=0;n<i.length-1;n++){var s=i[n];if(!o.hasOwnProperty(s))throw"the "+e+"--"+s+" class is not provide";o=o[s]}return o}}}();r.shareObj("common.ClassTool",E);var w={getHttpsDomain:function(t){if("https:"==window.location.protocol){t=t.split("://")[1];var e={"yuntv.letv.com":"s.yuntv.letv.com","ark.letv.com":"arkletv.lecloud.com","api.letvcloud.com":"apiletv.lecloud.com","sdk.lecloud.com":"sdkletv.lecloud.com"};return e.hasOwnProperty(t)&&(t=e[t]),"https://"+t}return t}};r.PluginStack={ErrorInfo:"http://yuntv.letv.com/player/plugin/errorRender.js",FeedbackInfo:"http://yuntv.letv.com/player/plugin/feedbackRender.js",PanoRender:"http://yuntv.letv.com/player/plugin/panoRender1.1.js"};for(var S in r.PluginStack)"https:"==window.location.protocol&&(r.PluginStack[S]=r.PluginStack[S].replace("http://","https://s."));var b={SkinTpl:"",setMediacontrols:function(t,e){var i;""!=t&&(t="."+t+" "),i="{id}video::-webkit-media-controls-enclosure,{id}video::-webkit-media-controls {display: {dislay} !important;}".replace(/{id}/g,t),i=e?i.replace("{dislay}",""):i.replace("{dislay}","none"),u.loadCss(i)},setMediafullscreen:function(t,e){var i;""!=t&&(t="."+t+" "),i="{id}video::-webkit-media-controls-fullscreen-button {display: {dislay} !important;}".replace(/{id}/g,t),i=e?i.replace("{dislay}",""):i.replace("{dislay}","none"),u.loadCss(i)},getSkinTpl:function(){"undefined"==typeof window.CloudSdkPlugin&&(window.CloudSdkPlugin={}),window.CloudSdkPlugin.skinUuid=a.creatUuid();var t=window.CloudSdkPlugin.skinUuid;if(""==b.SkinTpl){var e;e="@keyframes d{#}{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes d{#}{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}.controlBar{#}{border-top: 1px solid rgb(51, 39, 39);position:absolute;left:0px;bottom:0px;background-color:rgba(0, 0, 0, 0.8);width:100%;height:40px;z-index:5;}.controlBar{#} div{-moz-user-select:none;-webkit-user-select:none;user-select:none;box-sizing:content-box}.hCrtBar{#}{transform: translate(0,41px);-webkit-transform: translate(0,41px);-moz-transform: translate(0,41px);-o-transform: translate(0,41px);-ms-transform: translate(0,41px);}.showError{#}{position:absolute;left: 10%;top:20%;width:80%;height:60%;text-align: center;background-color:rgba(0, 0, 0,.9);border: 1px solid rgb(107, 95, 95);z-index:7;}.loading{#}{position: absolute;background-color:rgba(0, 0, 0,.9);top: 0%;left: 0%;width: 100%;height: 100%;zoom: 1;z-index:4;}.loading{#} .bld_hv{#}{position: absolute;top:50%;left:50%;}.pbtn_hv{#}{width: 75px;height: 75px;overflow: hidden;background: url({#BGP}) no-repeat;margin: -40px 0 0 -38px;}.loading{#} .mld_hv{#}{position: absolute;top: 50%;left: 50%;background-position: -11px -101px;}.loading{#} .mld_hv{#} .ld_mc{#}{margin: 0px;background-position: -11px -201px;animation: d{#} .7s linear 0s infinite;-webkit-animation: d{#} .7s linear 0s infinite}.videoArea{#}{position:absolute;width:100%;height:100%;z-index:3;}.text{#}{color:#fff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:16px;font-family:Microsoft YaHei, SimSun, Arial;}.tText{#}{color:#fff;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:14px;font-family:Arial;}.definition{#}{float:left;position:absolute;text-align:center;height:27px;line-height:27px;padding: 0px 5px 0px 5px;top: 5px;white-space: nowrap;}.button{#}{cursor:pointer;}.pBack{#}{padding:0px;margin:0px;background:rgba(1, 1, 1, 0) url({#BGP}) no-repeat scroll}.play{#}{width:100%;height:100%;background-position:-10px -5px;}.pause{#}{position:absolute;width:100%;height:100%;background-position:-39px -5px;}.playBar{#}{width:100%;height:5px;background-repeat:repeat;float:left;position: absolute;background-position: 0px -36px;z-index:12;}.playIng_bg{#}{left:0px;top:0px;width:100%;height:40px;position: absolute;margin-top:-18px;z-index:1;}.bufferBar{#}{z-index: 11;background-position: 0px -43px;}.barIco{#}{z-index: 13;background-position:-65px -5px;margin-left:-12px;width: 24px;height: 24px;top:-8px;position:absolute;float:left;}.playBtn{#}{float:left;position: absolute;height: 27px;width: 27px;top:5px;}.pIng{#}{float:left;position: absolute;height: 5px;top:16px;background-position:0px -50px;background-repeat:repeat;width:2px;cursor:pointer;}.pvol{#}{position: absolute;float:left;height: 18px;top: 12px;width:20px;}.vol{#}{background-position:-95px -5px;float:left;height: 100%;width:100%;}.deList{#}{background-color: #261D1D;padding: 2px;position:absolute;}.litem{#}{padding: 7px 18px 7px 18px;text-align: center;height: 25px;line-height: 25px;white-space: nowrap;}.full{#}{float:left;position: absolute;top:12px;width: 19px;height: 20px;}.fullScreen{#}{width: 100%;height: 100%;position:absolute;background-position:-134px -5px;}.cfullScreen{#}{display:none;background-position:-151px -5px;}.time{#}{position:absolute;top:6px;left:0px;pointer-events:none}.duration{#}{position:absolute;top:6px;right:0px;pointer-events:none}.activeText{#}{color:#0099FF;}.logo{#}{float:left;display:none;position: absolute;}.bgBtn{#}{position:absolute;left:50%;top:50%;z-index:7;cursor:pointer;background-position:-111px -101px;}".replace(/{#BGP}/g,"http://yuntv.letv.com/assets/img/skin.png?v=1901"),e=e.replace(/{#}/g,t),u.loadCss(e),e={skin:"<div id='#{videoArea}' class='videoArea{#}'></div><div id='#{controlBar}' class='controlBar{#}'></div><div id='#{loading}' class='loading{#}'></div><div id='#{playBtn}' class='bgBtn{#} pbtn_hv{#}'></div>",controlBar:'<div id="#{playBtnBox}" class="playBtn{#}"><div id="#{playBtn}" class="button{#} pBack{#} play{#}" ></div><div id="#{pauseBtn}" class="button{#} pBack{#} pause{#}" ></div></div> <div id="#{playIngBar}" class="pBack{#} pIng{#}" ><div id="#{playBarIco}" class="button{#} pBack{#} barIco{#}""></div><div id="#{playBar}" class="pBack{#} playBar{#}"></div><div id="#{bufferBar}" class="pBack{#} playBar{#} bufferBar{#}"></div><div id="#{playIngBg}" class="playIng_bg{#}"></div><div id="#{time}" class="tText{#} time{#}" style="left: 0px;"></div><div id="#{duration}" class="tText{#} duration{#}" ></div></div> <div  id="#{volBox}" class="pvol{#}"><div id="#{vol}" class="button{#} pBack{#} vol{#}" ></div></div> <div id="#{definition}" class="text{#} definition{#} button{#}" ></div> <div id="#{definitionList}" class="deList{#}"></div> <div id="#{fullScreenBox}" class="full{#}"  ><div id="#{fullScreen}" class="button{#} pBack{#} fullScreen{#}"></div><div id="#{cancelFullScreen}" class="button{#} pBack{#} fullScreen{#} cfullScreen{#}"></div></div> <div id="#{logo}" class="logo{#}"></div>',loading:'<div id="#{bld}" class="bld_hv{#}"></div><div id="#{sld}" class="mld_hv{#} pbtn_hv{#}"><div class="ld_mc{#} pbtn_hv{#}"></div></div>'};for(var i in e)e[i]=e[i].replace(/{#}/g,t);b.SkinTpl=e}}},T="cid pid vid mmsid pic title url nextvid nextpic nexttitle nexturl nextchapter duration total percent rotation fullscreen color volume jump continuePlay gpu gpuing definition defaultDefinition trylook fullScale originalScale originalRect".split(" "),k={PLAY:0,PAUSE:1,STOP:2},P={CHANGESTATEPLAY:0,VOL:2,FULLSCREEN:3,TIME:4,BUFFER:5,LOADING:6,INFO:7,STOP:8,ERROR:9,DURATION:10,DEFINITIONS:11,DEFINITION:13,MAINLOADING:14,CONTROLVISIBLE:14,ERRORHIDE:15,LOGO:18},A={PARAMS:"1",NOSTART:"2",INTERRUPT:"3",END:"7",NOPLAN:"4",PEOPLE_OUT:"5",WHITE_LIST:"6",ACTIVITY_IO:"60",ACTIVITY_TIMEOUT:"61",ACTIVITY_ANALY:"63",NOSTREAM:"64",LIVE_ANALY:"50",LIVE_IO:"51",LIVE_TIMEOUT:"53",PLAY_IO:"480",PLAY_TIMEOUT:"481",VOD_CONFIG_IO:"150",VOD_CONFIG_TIMEOUT:"152",VOD_MMSID_ANALY:"153",VOD_CONFIG_DRM:"154",GSLB_IO:"470",GSLB_ANALY:"473",NOSupport:"490"},L=function(){function t(){this.init()
}return t.prototype={init:function(){},addEventListener:function(t,e,i){if("undefined"==typeof t)throw this.log(t),Error("type is undefined");if("undefined"==typeof e)throw this.log(e),Error("handler is undefined");if("undefined"==typeof i)throw this.log(i),Error("handlerThis is undefined");this.hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(t)||(this.EventMap[t]=[]),this.hasEventListener(t,e,i)||this.EventMap[t].push({fun:e,target:i})},hasEventListener:function(t,e,i){if("undefined"==typeof t)throw this.log(t),Error("type is undefined");if("undefined"==typeof e)throw this.log(e),Error("handler is undefined");if("undefined"==typeof i)throw this.log(i),Error("handlerThis is undefined");if(this.hasOwnProperty("EventMap")&&this.EventMap.hasOwnProperty(t))for(var o=0;o<this.EventMap[t].length;o++){var n=this.EventMap[t][o];if(n.fun==e&&n.target==i)return!0}return!1},dispatchEvent:function(t){var e=t.type;if(t.target=this,this.hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(e)){for(var i=[],o=0;o<this.EventMap[e].length;o++)i.push(this.EventMap[e][o]);for(o=0;o<i.length;o++)i[o].fun.call(this.EventMap[e][o].target,t)}},removeEventListener:function(t,e,i){if(this.hasOwnProperty("EventMap")||(this.EventMap={}),this.EventMap.hasOwnProperty(t))for(var o=0;o<this.EventMap[t].length;o++)if(this.EventMap[t][o].fun==e&&this.EventMap[t][o].target==i){this.EventMap[t].splice(o,1),0==this.EventMap[t].length&&delete this.EventMap[t];break}},destroy:function(){for(var t in this.EventMap)delete this.EventMap[t];this.EventMap=null},log:function(t){g.log(t,this)}},t}();r.shareObj("core.ClassObject",L);var I=function(){function t(t,e){this.init(t,e)}return E.inherits(t,L),t.prototype.init=function(t,e){this.facade=t,this.model=e},t}(),O=function(){return function(){this.type=arguments[0],this.args=arguments}}(),x=function(){function t(){}return E.inherits(t,L),t}(),C=function(){function t(){}return E.inherits(t,L),t.prototype.load=function(t){this.loader=new N,this.isClose=!1,t=this.getRequestList(),this.log("requestUrls:"+f.jsonToString(t)),2==this.requestType?this.loader.load2(t,this.loadCmp,this.loadError,this):this.loader.load(t,this.loadCmp,this.loadError,this)},t.prototype.getUrl=function(){return 1<this.loader.urlList.length?this.loader.urlList[0].url:""},t.prototype.getRequestList=function(){return[]},t.prototype.unload=function(){this.loader&&this.loader.destroy(),this.isClose=!0},t.prototype.loadCmp=function(t,e){!this.isClose&&this.dispatchEvent(new O(U.LOADCMP,[t,e]))},t.prototype.loadError=function(t,e){!this.isClose&&this.dispatchEvent(new O(U.LOADERROR,[t,e]))},t}(),V=function(){function t(){}return E.inherits(t,L),t.prototype.initPlugin=function(t,e,i){this.pluginCmpFun=e,this.REConf=i,this.REConf.hasOwnProperty(t.type)?(e=this.REConf[t.type],e.hasOwnProperty("check")?"function"==typeof e.check?e.check()?this.load(t):t.onerror(e.err):e.check?this.load(t):t.onerror(e.err):this.load(t)):(this.pluginCmpFun(null),t.onstart())},t.prototype.load=function(t){var e=this;e.pl=this.REConf[t.type],r.getPlugin(e.pl.name,function(t){t?e.pluginCmpFun(t):e.onerror({code:420,message:"插件加载错误"})})},t}(),D=function(){function t(t,e){this.facade=t,this.model=e,this.init()}return E.inherits(t,L),t.prototype.init=function(){this.tplKey="view",this.addEvent=!0},t.prototype.setUp=function(t,e){""==b.SkinTpl&&b.getSkinTpl();var i=b.SkinTpl[this.tplKey]||"";if(this.el=u.$E(t),this.skin=new R(this.el),i=u.getTemplate(this.el,i),e)for(var o=0;o<i.length;o++)this.el[i[o]]=new R(this.el[i[o]]);this.addEvent&&this.facade.addEventListener(M.EVENT,this.skinHandler,this)},t.prototype.skinHandler=function(){},t.prototype.setSize=function(){},t}(),R=function(){function t(t,e){this.init(t),"undefined"==typeof e&&(e=window.CloudSdkPlugin.skinUuid),this.sid=e}var e=r.getObj("common.ClassTool"),i=r.getObj("core.ClassObject"),o=r.getObj("common.UiTool");return e.inherits(t,i),t.prototype.init=function(t){this.el=t},t.prototype.addEventListener=function(t,e){t=o.turnEvent(t),"-"!=t&&o.addEvent(this.el,t,e)},t.prototype.removeEventListener=function(t,e){t=o.turnEvent(t),o.removeEvent(this.el,t,e)},t.prototype.drag=function(t){o.drag(this.el,t)},t.prototype.setVisible=function(t){t?(this.el.style.display="block",this.setAttribute({orgwidth:this.el.offsetWidth,orgheight:this.el.offsetHeight})):this.el.style.display="none"},t.prototype.getVisible=function(){return"none"!=this.el.style.display},t.prototype.setWidth=function(t){t+="",this.el.style.width=-1!=t.indexOf("%")?t:t+"px"},t.prototype.getWidth=function(){return 0==this.el.offsetWidth?this.getAttribute("orgwidth"):this.el.offsetWidth},t.prototype.setHeight=function(t){t+="",this.el.style.height=-1!=t.indexOf("%")?t:t+"px"},t.prototype.getHeight=function(){return 0==this.el.offsetHeight?this.getAttribute("orgheight"):this.el.offsetHeight},t.prototype.setX=function(t){t+="",this.el.style.left=-1!=t.indexOf("%")?t:t+"px"},t.prototype.getX=function(){return this.el.offsetLeft},t.prototype.setY=function(t){t+="",this.el.style.top=-1!=t.indexOf("%")?t:t+"px"},t.prototype.getY=function(){return this.el.offsetTop},t.prototype.appendChild=function(t){t.hasOwnProperty("el")&&(t=t.el),this.el.appendChild(t)},t.prototype.html=function(t){this.el.innerHTML=t},t.prototype.setClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,this.el.className=t},t.prototype.hasClassName=function(t){return t=t.split(" ").join(this.sid+" "),t+=this.sid,o.hasClassName(this.el,t)},t.prototype.addClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,o.addClassName(this.el,t)},t.prototype.removeClassName=function(t){t=t.split(" ").join(this.sid+" "),t+=this.sid,o.removeClassName(this.el,t)},t.prototype.getAttribute=function(t){return this.el.getAttribute(t)},t.prototype.hasAttribute=function(t){return this.el.hasAttribute(t)},t.prototype.setAttribute=function(t){for(var e in t)this.el.setAttribute(e,t[e])},t.prototype.removeAttribute=function(t){if(a.isArray(t))for(var e=0;e<t.length;e++)this.el.removeAttribute(t[e]);else this.el.removeAttribute(t)},t.prototype.setStyle=function(t){for(var e in t)this.el.style[e]=t[e]},t}();r.shareObj("core.view.DisplayObject",R);var N=function(){function t(){}return t.prototype={load:function(t,e,i,o){this.urlList=t;var n=this,s=0,r=a.now(),l=function(){clearTimeout(n.delayID),a.getJSON(n.urlList[0].url,function(t,i){s+=i.retryCount,e&&e.call(o,t,{responseTime:a.now()-r,retryCount:s})},function(t,e){1<n.urlList.length?(s+=n.urlList[0].maxCount,n.urlList.shift(),n.delayID=setTimeout(l,n.urlList[0].retryTime)):(s+=e.retryCount,i&&i.call(o,null,{responseTime:a.now()-r,retryCount:s}))},n.urlList[0].timeout,n.urlList[0].maxCount,n.urlList[0].retryTime)};l()},load2:function(t,e,i,o){this.urlList=t;var n=this,s=0,r=a.now(),l=function(){clearTimeout(n.delayID),a.getJSONbyAjax(n.urlList[0].url,function(t,i){s+=i.retryCount,e&&e.call(o,t,{responseTime:a.now()-r,retryCount:s})},function(t,e){1<n.urlList.length?(s+=n.urlList[0].maxCount,n.urlList.shift(),n.delayID=setTimeout(l,n.urlList[0].retryTime)):(s+=e.retryCount,i&&i.call(o,null,{responseTime:a.now()-r,retryCount:s}))},n.urlList[0].timeout,n.urlList[0].maxCount,n.urlList[0].retryTime)};l()},destroy:function(){clearTimeout(this.delayID)}},t}(),_=function(){function t(t,e,i,o){this.delay=t,this.timerHandler=i,this.handlerThis=e,"undefined"==typeof o&&(o=0),this.max=o,this.currentCount=this.T=0,this.running=!0}return t.prototype={start:function(){this.running=!0,this.checkTime(!1)},checkTime:function(t){var e=this;return clearTimeout(this.T),t&&(e.currentCount++,e.timerHandler.call(e.handlerThis),0<e.max&&e.currentCount>=e.max)?void e.stop():void(e.T=setTimeout(function(){e.checkTime.call(e,!0)},e.delay))},stop:function(){this.running=!1,clearTimeout(this.T)},reset:function(){this.stop(),this.currentCount=0},clear:function(){this.handlerThis=this.timerHandler=this.delay=null,this.T=0}},t}(),H=function(){return{EVENT:"adEvent",HEADSTART:"adHeadPlayStart",HEADEND:"adHeadPlayComplete",NOAD:"adHeadPlayNone"}}(),U=function(){return{LOADCMP:"loadcmp",LOADERROR:"loaderror"}}(),B=function(){return{EVENT:"playerEvent",INIT:"playerInit",VIDEO_AUTH_VALID:"videoAuthValid",VIDEO_DATA_START:"videoDataStart",VIDEO_DATA_CMP:"videoDataCmp",GSLB_START:"gslbStart",GSLB_CMP:"gslbCmp",VPH:"videoPageHide",VPS:"videoPageShow",WPH:"webPageHide",ERROR:"playerError",RESIZE:"playerResize",VIDEO_INFO:"videoInfo",FULLSCREEN:"fullscreen",PRESIZE:"resize",VIDEO_LIVESTOP:"videoLiveStop",VIDEO_INTERRUPT:"videoLiveInterupt"}}(),F=function(){return{EVENT:"MediaEvent",CONNECT:"videoConnect",START:"videoStart",PLAY:"videoResume",STOP:"videoStop",PAUSE:"videoPause",BUFFEREMPTY:"videoEmpty",BUFFEREFULL:"videoFull",SEEK:"videoSeek",SEEKEMPTY:"videoSeekEmpty",PLAYING:"videoPlaying",LODING:"videoLoading",METADATA:"MetaData",DURATION:"videoDuration",DEFSTART:"swapDefinition",ERROR:"videoError",REPLAY:"videoReplay"}}(),M=function(){return{EVENT:"skinEvent",PLAY:"skinPlay",PAUSE:"skinPause",SETDEFINITION:"setDefinition",SEEK:"skinSeek",VOLUME:"skinVolume",FULLSCREEN:"skinFullScreen",REPLAY:"skinReplay",FULLSCREEN:"skinFullscreen"}}(),z=function(){function t(){for(var t="mac nt os osv app bd xh ro cs ssid lo la".split(" "),e=this,i=0;i<t.length;i++)this[t[i]]="";this.refresh=function(t){for(var i in t)e[i]=t[i]}}function e(){var t=this;this.autoplay=0,this.refresh=function(e){for(var i in e)t[i]=e[i]}}function i(){var t=this;this.refresh=function(e){for(var i in e)t[i]=e[i]}}function o(){for(var t=["userId"],e=this,i=0;i<t.length;i++)this[t[i]]="";this.refresh=function(t){for(var i in t)e[i]=t[i]}}function n(){for(var t="title duration volume definition defaultDefinition fullscreen percent time url videoWidth videoHeight".split(" "),e=this,i=0;i<t.length;i++)this[t[i]]="";this.definitionCount=0,this.refresh=function(t){for(var i in t)e[i]=t[i]}}function s(){this.systemData=new t,this.config=new e,this.reportParam={},this.clear()}return s.prototype={init:function(t){switch(this.platform){case"sdk":this._uuid="",this.playType=t.ptype,delete t.ptype;for(var e="autoplay uu vu liveId streamId activityId".split(" "),i=0;i<e.length;i++){var o=e[i];t.hasOwnProperty(o)&&(this.config[o]=t[o],delete t[o])}this.systemData.refresh(t),g.log("[Stat K]  model init:"+this.systemData.deviceId+"  _2016-03-17 15:05:40.087"),this._apprunid=this.systemData.deviceId+"_"+a.now();break;case"html5":this.systemData.refresh(t),this._apprunid=this.lc()+"_"+a.now()}},clear:function(){this._uuid="",this._lc=a.getLocal("lc"),this.userData=new o,this.videoSetting=new n,this.playerConfig=new i,this.platform="html5",this.playType="vod"},uuid:function(){if("sdk"==this.platform){if(this.videoSetting.hasOwnProperty("uuid")&&6<this.videoSetting.uuid.length)return this.videoSetting.uuid;var t=ExternalInterface.callSDK(this.systemData.os,"getVideoSetting","");if(this.videoSetting.refresh(t),this.videoSetting.hasOwnProperty("uuid")&&6<this.videoSetting.uuid.length)return this.videoSetting.uuid}return""==this._uuid&&(this._uuid=a.creatUuid()),this._uuid+"_"+this.videoSetting.definitionCount},clearUuid:function(){this._uuid=""},lc:function(){return null==this._lc&&(this._lc=a.creatUuid(),a.setLocal("lc",this._lc)),this._lc},getTypeFrom:function(){var t=a.getUrlParams("ch");if(t)return t.toString();try{if(""!=this.userInfo().userId)return"bcloud_"+this.userInfo().userId}catch(e){}return"letv"},apprunid:function(){return this._apprunid},auid:function(){return this.systemData.deviceId},pcode:function(){return"-"},videoInfo:function(){switch(this.platform){case"sdk":var t=ExternalInterface.callSDK(this.systemData.os,"getVideoSetting","");return t.hasOwnProperty("cid")&&""!=t.cid||(t.cid=100),t.hasOwnProperty("liveid")&&(t.lid=t.liveid,delete t.liveid),t.hasOwnProperty("time")&&""==t.time&&(t.time="0"),this.videoSetting.refresh(t),t;case"html5":return t=this.api.getVideoInfo(),this.videoSetting.refresh(t),t}},userInfo:function(){switch(this.platform){case"sdk":if(""==this.userData.userId){var t=ExternalInterface.callSDK(this.systemData.os,"getUserSetting","");this.userData.refresh(t)}return this.userData;case"html5":return this.userData}}},s}(),Y=function(){function t(t){this.model=t}return E.inherits(t,C),t.prototype.load=function(t){this.curTime=0,this.superClass.load.call(this,t)},t.prototype.getRequestList=function(){for(var t=[],e=["//106.39.244.239/","//111.206.211.221/","//223.95.79.18/"],i={cf:this.getCf(),ran:this.getCurTime(),pver:this.model.playerConfig.version,bver:encodeURIComponent(a.getBrowserVersion()),uuid:this.model.uuid(),pf:"html5",spf:this.getSpf()},o=w.getHttpsDomain("http://api.letvcloud.com")+"/gpc.php?format=jsonp&ver=2.1&playid=0",n="ark uu vu payer_name check_code pu".split(" "),s=0;s<n.length;s++){var r=n[s];this.model.config.hasOwnProperty(r)&&(i[r]=this.model.config[r])}i.sign=this.getSign(["cf"+i.cf,"ran"+i.ran,"uu"+i.uu,"bver"+i.bver,"vu"+i.vu]);for(r in i)o+="&"+r+"="+i[r];for(o+="&page_url="+encodeURIComponent(window.location.href),t.push({url:o,timeout:5e3,maxCount:3,retryTime:0}),s=0;s<e.length;s++)-1!=t[0].url.indexOf("//api.letvcloud.com/")&&(i=o.replace("//api.letvcloud.com/",e[s]),t.push({url:i,timeout:5e3,maxCount:3,retryTime:0}));return t},t.prototype.getSign=function(t){return c.hash(t.join("")+"fbeh5player12c43eccf2bec3300344")},t.prototype.getCurTime=function(){return 0!=this.curTime?this.curTime:parseInt(.001*a.now())},t.prototype.getCf=function(){switch(a.getDevice()){case"ipad":case"iphone":return"html5_ios"}return"html5"},t.prototype.getSpf=function(){var t=a.getDevice(),e={androidPhone:0,iphone:1,letvTv:2,ipad:3,androidPad:4};return e.hasOwnProperty(t)?e[t]:0},t.prototype.loadCmp=function(t,e){if(!this.isClose){var i=this.model;if(this.log("gpc ok data:"+f.jsonToString(t)+"----time:"+f.jsonToString(e)),0==t.code){t=t.data;var o={};o.userId=t.user_info.user_id,i.userData.refresh(o),o={},o.mloadingUrl=t.player_info.loading_url,o.logo={pic:t.player_info.logo_pic,pos:t.player_info.logo_pos,url:t.player_info.logo_url||t.user_info.logo_url},i.playerConfig.refresh(o),o={},o.vid=t.video_info.video_id,o.cid=100,o.pid="",o.title=t.video_info.video_name,o.duration=t.video_info.video_duration,o.defaultDefinition=t.video_info.default_play,o.isdrm=t.video_info.isdrm,o.ark=t.user_info.ark,o.mmsid=t.video_info.media_id,t.video_info.hasOwnProperty("pa")&&(o.pano=t.video_info.pa);var n,r={};for(n in t.video_info.media){var a=t.video_info.media[n];r[n]={};var l=["main_url","backup_url_1","backup_url_2","backup_url_3"];r[n].urls=[];for(var d=0;d<l.length;d++)a.play_url.hasOwnProperty(l[d])&&r[n].urls.push(this.checkGslbUrl(p.decode(a.play_url[l[d]])));r[n].videoWidth=a.play_url.vwidth,r[n].videoHeight=a.play_url.vheight,r[n].gbr=a.play_url.gbr,r[n].vtype=a.play_url.vtype,r[n].definition=a.definition,r[n].videoType=a.video_type}o.media=r,o.pic=t.play_info.init_pic,i.videoSetting.refresh(o),i.vodPlayType=s(),this.dispatchEvent(new O(U.LOADCMP,[t,e]))}else"10071"==t.code?(this.curTime=t.timestamp,this.reload()):this.dispatchEvent(new O(U.LOADERROR,[{code:A.VOD_MMSID_ANALY,message:t.message,errInfo:"url:"+this.getUrl()+" respponse:"+f.jsonToString(t)},e]))}},t.prototype.reload=function(){this.unload(),this.superClass.load.call(this)},t.prototype.checkGslbUrl=function(t){return t},t.prototype.loadError=function(t,e){this.isClose||this.dispatchEvent(new O(U.LOADERROR,[{code:A.VOD_CONFIG_IO,errInfo:"url:"+this.getUrl()},e]))},t}(),W=function(){function t(t){this.model=t}return E.inherits(t,C),t.prototype.getRequestList=function(){var t=[],e=a.clone(this.model.videoSetting.urls);a.addUrlParams(e,{jsonp:"?",_r:"jsonp",format:1,expect:3});for(var i=0;i<e.length;i++){var o=this.checkGslbUrl(e[i]);t.push({url:o,timeout:1e4,maxCount:3,retryTime:0})}return t},t.prototype.checkGslbUrl=function(t){return"ios"==this.model.vodPlayType&&-1==t.indexOf("&tss=ios&")&&(t=-1!=t.indexOf("&tss=no&")?t.replace("&tss=no&","&tss=ios&"):t+"&tss=ios"),"mp4"==this.model.vodPlayType&&-1==t.indexOf("&tss=no&")&&(t=-1!=t.indexOf("&tss=ios&")?t.replace("&tss=ios&","&tss=no&"):t+"&tss=no"),t},t.prototype.loadCmp=function(t,e){if(!this.isClose)if(this.log("gslb data:"+f.jsonToString(t)+" time"+f.jsonToString(e)),200==t.status){t.ercode="0";for(var i=[t.location],o=0;o<t.nodelist.length;o++)t.nodelist[o].location!=i[0]&&i.push(t.nodelist[o].location);this.dispatchEvent(new O(U.LOADCMP,i))}else this.dispatchEvent(new O(U.LOADERROR,[{code:A.GSLB_ANALY,message:"调度错误"},e]))},t.prototype.loadError=function(t,e){this.isClose||this.dispatchEvent(new O(U.LOADERROR,[{code:A.GSLB_IO,errInfo:"url:"+this.getUrl()},e]))},t}(),j=function(){function t(){this.lastTime=this.pt=0,this.isStartPlay=this.isPauseRecord=!1,this.state="",this.replaytype=1}function e(t){this.model=t,this.reset()}var i={pc:{value:30,sub:{value:300}},sdk:{value:32,sub:{value:321,ios:{value:321},android:{value:322}}},html5:{value:31,sub:{value:310,ios:{value:311},android:{value:312},pc:{value:310}}}},o={android:600,ios:601};return e.prototype={init:function(){this.model.reportParam.p1=3,this.model.reportParam.p2=i[this.model.platform.toLowerCase()].value,this.model.reportParam.p3=i[this.model.platform.toLowerCase()].sub.hasOwnProperty(this.model.systemData.os.toLowerCase())?i[this.model.platform.toLowerCase()].sub[this.model.systemData.os.toLowerCase()].value:i[this.model.platform.toLowerCase()].sub.value},reset:function(){this.heartTimer&&(this.heartTimer.stop(),this.heartTimer=null),this.reportParam=new t},onStateChanged:function(t,e){switch(e=f.stringToJson(e),g.log("[Stat K 日志数据]  type:"+t+" data:"+e),t){case"init":this.reportParam.isStartPlay=!1,this.model.init(e),this.init(),this.sendEnvStat();break;case"start":this.reportParam.isStartPlay=!1,this.sendPlayStat("init");break;case"play":this.reportParam.isStartPlay||(this.sendPlayStat("play",e),this.startHeartTimer(),this.resumePtStat(),this.reportParam.isStartPlay=!0);break;case"bufferEmpty":this.reportParam.state!=t&&this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("block"));break;case"bufferFull":"bufferEmpty"==this.reportParam.state&&this.reportParam.isStartPlay&&(this.resumePtStat(),this.sendPlayStat("eblock")),this.reportParam.isStartPlay||(this.reportParam.isStartPlay=!0);break;case"seek":this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("drag",{py:{dr:this.model.videoInfo().time+"_"+e.time}}));break;case"pause":this.reportParam.state!=t&&this.reportParam.isStartPlay&&(this.pausePtStat(),this.sendPlayStat("pa"));break;case"resume":this.reportParam.isStartPlay&&this.resumePtStat();break;case"definition":this.reportParam.isStartPlay&&(this.pausePtStat(),this.model.videoSetting.definitionCount++,this.reportParam.replaytype=2,this.sendPlayStat("tg"));break;case"stopPlay":this.reportParam.isStartPlay&&(this.reportParam.isStartPlay=!1,this.pausePtStat(),this.pauseHeadStat(),this.sendPlayStat("end"));break;case"playStop":this.reportParam.isStartPlay&&(this.reportParam.isStartPlay=!1,this.pauseHeadStat(),this.sendPlayStat("end"),this.sendPlayStat("finish"));break;case"hide":null!=this.heartTimer&&this.reportParam.isStartPlay&&(this.pausePtStat(!0),this.heartTimer.stop());break;case"show":null!=this.heartTimer&&this.reportParam.isStartPlay&&(this.resumePtStat(!0),this.heartTimer.start());break;case"error":this.reportParam.isStartPlay=!1,this.sendErrorStat(e),null!=this.heartTimer&&this.heartTimer.stop()}this.reportParam.state=t},startHeartTimer:function(){this.heartTimer?this.heartTimer.running||(this.setDelay(),this.heartTimer.start()):(this.heartTimer=new _(18e4,this,this.heartHanlder),this.setDelay(),this.heartTimer.start())},pauseHeadStat:function(){this.heartHanlder(),this.heartTimer&&this.heartTimer.stop()},setDelay:function(){if(this.heartTimer)switch(this.heartTimer.currentCount){case 0:this.heartTimer.delay=15e3;break;case 1:this.heartTimer.delay=6e4;break;default:this.heartTimer.delay=18e4}},heartHanlder:function(){this.pausePtStat(!0),this.resumePtStat(!0),this.setDelay(),this.sendPlayStat("time"),this.reportParam.pt=0},pausePtStat:function(t){"undefined"==typeof t&&(t=!1);var e=a.now();this.reportParam.isPauseRecord||0==this.reportParam.lastTime||(this.reportParam.pt+=e-this.reportParam.lastTime),0==this.reportParam.lastTime&&(this.reportParam.pt=0),this.reportParam.lastTime=e,t||(this.reportParam.isPauseRecord=!0)},resumePtStat:function(t){"undefined"==typeof t&&(t=!1);var e=a.now();this.reportParam.lastTime=e,t||(this.reportParam.isPauseRecord=!1)},sendEnvStat:function(){var t,e=this.model;t="http://apple.www.letv.com/env/?ver=3.0.5&p1="+this.model.reportParam.p1,t+="&p2="+this.model.reportParam.p2,t+="&p3="+this.model.reportParam.p3,"html5"==this.model.platform&&(t+="&lc="+e.lc()),"sdk"==this.model.platform&&(t+="&auid="+e.auid()),t+="&uuid="+e.uuid(),t+="&mac="+e.systemData.mac,t+="&nt="+e.systemData.nt,t+="&os="+e.systemData.os,t+="&osv="+e.systemData.osv,t+="&app="+e.systemData.appv,t+="&bd="+encodeURIComponent(e.systemData.bd),t+="&xh="+encodeURIComponent(e.systemData.xh),t+="&ro="+encodeURIComponent(e.systemData.ro),t+="&src=pl",t+="&ch="+e.getTypeFrom(),t+="&cs="+encodeURIComponent(e.systemData.cs),t+="&ssid="+encodeURIComponent(e.systemData.ssid),t+="&lo="+encodeURIComponent(e.systemData.lo),t+="&la="+encodeURIComponent(e.systemData.la),t+="&apprunid="+e.apprunid(),t+="&r="+Math.random(),this.report(t)},sendPlayStat:function(t,e){var i,n=this.model;i="http://apple.www.letv.com/cloud_pl/?ver=3.0.5&p1="+this.model.reportParam.p1,i+="&p2="+this.model.reportParam.p2,i+="&p3="+this.model.reportParam.p3,i+="&ac="+t,i+="&prg="+n.videoInfo().time,"time"==t&&(18e4<this.reportParam.pt&&(this.reportParam.pt=18e4),i+="&pt="+Math.abs(Math.round(.001*this.reportParam.pt))),"html5"==this.model.platform&&(i+="&lc="+n.lc()),"sdk"==this.model.platform&&(i+="&auid="+n.auid()),i+="&uuid="+n.uuid(),"vod"==n.playType&&(i+="&cid="+n.videoSetting.cid,""!=n.videoSetting.pid&&(i+="&pid="+n.videoSetting.pid),i+="&vid="+n.videoSetting.vid,i+="&ty=0",i+="&vlen="+n.videoSetting.duration),"live"==n.playType&&(i+="&lid="+n.videoSetting.lid,i+="&sid="+n.videoSetting.sid,i+="&ty=1",i+="&vlen=6000",n.videoSetting.hasOwnProperty("activityId")&&(i+="&zid="+n.videoSetting.activityId)),i+="&ch="+n.getTypeFrom(),i+="&vt="+n.videoSetting.vtype,i+="&pv="+encodeURIComponent(this.model.systemData.appv),"sdk"==this.model.platform&&(e||(e={}),e.hasOwnProperty("py")||(e.py={}),e.py.replaytype=this.reportParam.replaytype),null!=e&&e.hasOwnProperty("py")&&(i+="&py="+encodeURIComponent(a.objectParseToString(e.py))),"sdk"==this.model.platform&&(i+="&pcode="+this.model.pcode(),i+="&nt="+n.systemData.nt),i+="&ap="+this.model.config.autoplay,"init"==t&&"sdk"==this.model.platform&&(i+="&cdev="+n.systemData.cdev,i+="&caid="+o[n.systemData.os.toLowerCase()]),"play"==t&&(i+="&pay=0",e&&e.hasOwnProperty("cv")&&(i+="&stc="+encodeURIComponent(a.objectParseToString(e.cv.stc)),i+="&joint="+e.cv.joint)),i+="&prl=0",i+="&ctime="+a.now(),i+="&custid="+n.userInfo().userId,i+="&ipt=0",i+="&owner=1",i+="&apprunid="+n.apprunid(),"sdk"!=this.model.platform&&(i+="&url="+encodeURIComponent(window.location.href),i+="&ref="+encodeURIComponent(document.referrer)),i+="&r="+Math.random(),this.report(i)},sendErrorStat:function(t){var e,i=this.model;e="http://apple.www.letv.com/er/?ver=3.0.5&p1="+this.model.reportParam.p1,e+="&p2="+this.model.reportParam.p2,e+="&p3="+this.model.reportParam.p3,e+="&et=pl",e+="&err="+t.errcode,"html5"==this.model.platform&&(e+="&lc="+i.lc()),"sdk"==this.model.platform&&(e+="&auid="+i.auid()),e+="&mac="+i.systemData.mac,e+="&nt="+i.systemData.nt,e+="&os="+i.systemData.os,e+="&osv="+i.systemData.osv,e+="&app="+i.systemData.appv,e+="&bd="+i.systemData.bd,e+="&xh="+i.systemData.xh,e+="&ro="+i.systemData.ro,"vod"==i.playType&&(e+="&cid="+i.videoSetting.cid,""!=i.videoSetting.pid&&(e+="&pid="+i.videoSetting.pid),e+="&vid="+i.videoSetting.vid),"live"==i.playType&&(e+="&lid="+i.videoSetting.lid,e+="&sid="+i.videoSetting.sid),t={ch:i.getTypeFrom(),custid:i.userInfo().userId};for(var o=["uu","vu","liveId","streamId","activityId"],n=0;n<o.length;n++)i.config.hasOwnProperty(o[n])&&(t[o[n]]=i.config[o[n]]);e+="&ep="+encodeURIComponent(a.objectParseToString(t)),e+="&ap="+i.config.autoplay,e+="&uuid="+i.uuid(),e+="&apprunid="+i.apprunid(),e+="&r="+Math.random(),this.report(e)},report:function(t){if("html5"==this.model.platform){g.log("[Stat K]  url:"+t);var e=new Image(1,1);e.onload=e.onerror=e.onabort=function(){e=e.onload=e.onerror=e.onabort=null},e.src=t}"sdk"==this.model.platform&&ExternalInterface.callSDK(this.model.systemData.os,"logRequest",{url:t})}},e}(),G=function(){function t(t){this.model=t}return E.inherits(t,L),t.prototype.setUp=function(t){t.hasOwnProperty("uu")&&t.hasOwnProperty("vu")?(this.vodproxy=new Y(this.model),this.vodproxy.addEventListener(U.LOADCMP,this.gpcCmp,this),this.vodproxy.addEventListener(U.LOADERROR,this.errorHanlder,this),this.vodproxy.load()):this.dispatchEvent(new O(U.LOADERROR,[{code:A.PARAMS}]))},t.prototype.destroy=function(){this.vodproxy.unload()},t.prototype.errorHanlder=function(t){this.dispatchEvent(new O(U.LOADERROR,t.args[1]))},t.prototype.gpcCmp=function(t){this.refreshLoadingData(t),this.dispatchEvent(new O(U.LOADCMP,t))},t.prototype.refreshLoadingData=function(){this.model.config.hasOwnProperty("loadingurl")&&(this.model.playerConfig.mloadingUrl=0==this.model.config.loadingurl?this.model.playerConfig.loadingUrl:this.model.config.loadingurl)},t}(),q=function(){function t(){}return E.inherits(t,L),t.prototype.init=function(){this.playUrlList=[],this.isFtc=this.startPlay=this.autoplay=!1,this.playState=0,this.render=null,this.emptyDelay=1e3},t.prototype.setConfig=function(){},t.prototype.errorHandler=function(t){1<this.playUrlList.length&&t&&t.code&&4!=t.code?(this.playUrlList.shift(),this.log("播放失败， errCode:"+t.code+",切换下一个地址:"+this.playUrlList[0]),this.changeurl(this.playUrlList[0])):(t.hasOwnProperty("retryCdn")||(t.retryCdn=!0),t.hasOwnProperty("code")||(t.code=A.PLAY_TIMEOUT),this.log("播放失败: errCode:"+t.code+",url:"+this.playUrlList[0]),this.dispatchEvent(new O(F.EVENT,F.ERROR,[t])))},t.prototype.onPlaySeekHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.startPlay&&(this.playState=5,this.dispatchEvent(new O(F.EVENT,F.SEEK,this.getTime())))},t.prototype.onPlayFullHandler=function(){this.startPlay||(this.startPlay=!0,this.dispatchEvent(new O(F.EVENT,F.START)),this.render&&this.render.start()),1!=this.playState&&(this.playState=1,this.dispatchEvent(new O(F.EVENT,F.BUFFEREFULL,this.getTime()))),this.emptyST&&clearTimeout(this.emptyST)},t.prototype.onPlayEmptyHandler=function(){var t=this;t.emptyST&&clearTimeout(t.emptyST),t.startPlay&&3!=t.playState&&(5!=t.playState?(t.playState=3,t.emptyST=setTimeout(function(){t.dispatchEvent(new O(F.EVENT,F.BUFFEREMPTY,t.getTime()))},t.emptyDelay)):(t.playState=3,t.dispatchEvent(new O(F.EVENT,F.SEEKEMPTY,t.getTime()))))},t.prototype.onPlaStopHandler=function(){this.emptyST&&clearTimeout(this.emptyST),4!=this.playState&&(this.playState=4,this.dispatchEvent(new O(F.EVENT,F.STOP,!0)))},t.prototype.onPlayHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.playState=1,this.dispatchEvent(new O(F.EVENT,F.PLAY,this.getTime()))},t.prototype.onPauseHandler=function(){this.emptyST&&clearTimeout(this.emptyST),this.playState=2,this.dispatchEvent(new O(F.EVENT,F.PAUSE,this.getTime()))},t.prototype.onPlayIngHandler=function(){var t=this.getTime();t>=0&&!this.isFtc&&(t>0?(this.log("第一次获得非0的播放时间"+t),this.isFtc=!0,this.onPlayFullHandler()):"iphone"==a.getDevice()&&"qq"==a.getBrowser()&&this.onPlayFullHandler()),this.startPlay&&this.dispatchEvent(new O(F.EVENT,F.PLAYING,t))},t.prototype.onLoadIngHandler=function(){this.dispatchEvent(new O(F.EVENT,F.LODING,this.getLoadPercent()))},t.prototype.onMetaDataHandler=function(t){this.videoWidth=t.width||0,this.videoHeight=t.height||0,0<this.videoWidth&&0<this.videoHeight&!this.hasMetadata&&(this.setSize(),this.hasMetadata=!0,this.dispatchEvent(new O(F.EVENT,F.METADATA,{videoWidth:this.videoWidth,videoHeight:this.videoHeight,duration:this.duration}))),this.mduration&&0==t.duration&&(t.duration=this.mduration),0<t.duration&&this.duration!=t.duration&&(this.duration=t.duration,this.dispatchEvent(new O(F.EVENT,F.DURATION,{duration:this.duration})))},t}(),K=function(){function t(){var t=this;this.type="video",this.videoHandlerBack=function(){t.videoHandler.apply(t,arguments)}}var e=0,i="error emptied abort playing play pause ended canplay waiting loadeddata loadedmetadata timeupdate seeked seeking progress durationchange".split(" ");return E.inherits(t,q),t.prototype.destroy=function(){this.removeEvents(),this.video.pause(),this.video.src="",this.render&&this.render.close()},t.prototype.setPoster=function(t){this.video.poster=t},t.prototype.setUp=function(t,i){e++;var o,n="LecoudPlayer"+(new Date).getTime()+e,s=["preload","controls","width","height"];for(o='<div id="v{id}" style="left:0px;top:0px;width:100%;height:100%;display: block;position: relative;"><video  id="{id}" controls="controls"  style="width:100%;height:100%;"></video></div>'.replace(/{id}/g,n),i.innerHTML=o,this.outEl=i,this.video=document.getElementById(n),this.videoBox=document.getElementById("v"+n),this.config=t,this.isEndStartSeek=0<this.config.start?!1:!0,t.hasOwnProperty("pic")&&(this.video.poster=t.pic),t.hasOwnProperty("autoplay")&&"1"==t.autoplay?(this.video.autoplay="autoplay",this.autoplay=!0):this.autoplay=!1,t.hasOwnProperty("playsinline")&&"1"==t.playsinline&&(this.video.WebKitPlaysInline?this.video.WebKitPlaysInline=!0:(this.video.setAttribute("webkit-playsinline",""),this.video.setAttribute("playsinline",""))),n=0;n<s.length;n++)t.hasOwnProperty(s[n])&&"width"!=s[n]&&"height"!=s[n]&&(this.video[s[n]]=t[s[n]]);this.isShow=!0,this.vArea=this.videoBox,0<this.outEl.offsetWidth&0<this.outEl.offsetHeight||(this.videoBox.style.width="99.5%",this.videoBox.style.height="99.5%")},t.prototype.enableControls=function(){this.video.controls=!0},t.prototype.disableControls=function(){this.video.controls=!1},t.prototype.setContainer=function(t){this.vArea=t},t.prototype.setLoop=function(){},t.prototype.hide=function(t){this.isShow&&(t?this.video.style.display="none":(this.tmpwidth=this.videoBox.style.width,this.tmpheight=this.videoBox.style.height,this.videoBox.style.width="1px",this.videoBox.style.height="1px",this.videoBox.style.left="-1000px",this.videoBox.style.top="-1000px"),this.isShow=!1)},t.prototype.show=function(){this.isShow||(this.videoBox.style.display="",this.videoBox.style.width=this.tmpwidth,this.videoBox.style.height=this.tmpheight,this.videoBox.style.left="0px",this.videoBox.style.top="0px",this.isShow=!0)},t.prototype.setSize=function(){if(this.display=0<this.outEl.offsetWidth&0<this.outEl.offsetHeight?!0:!1,this.isShow)if(this.config.dvideoSize)this.display&&(this.videoBox.style.width="100%",this.videoBox.style.height="100%");else if(0<this.videoWidth&&0<this.videoHeight&0<this.outEl.offsetWidth&0<this.outEl.offsetHeight){var t,e;this.videoWidth/this.videoHeight>this.outEl.offsetWidth/this.outEl.offsetHeight?(t=this.outEl.offsetWidth,e=this.videoHeight*this.outEl.offsetWidth/this.videoWidth):(e=this.outEl.offsetHeight,t=this.videoWidth*this.outEl.offsetHeight/this.videoHeight),this.videoBox.style.width=t+"px",this.videoBox.style.height=e+"px",this.videoBox.style.top=.5*(this.outEl.offsetHeight-this.videoBox.offsetHeight)+"px",this.videoBox.style.left=.5*(this.outEl.offsetWidth-this.videoBox.offsetWidth)+"px"}this.render&&this.render.setSize(this.vArea.offsetWidth,this.vArea.offsetHeight)},t.prototype.addEvents=function(){for(var t=this.video,e=0;e<i.length;e++)t.addEventListener(i[e],this.videoHandlerBack,!0)},t.prototype.removeEvents=function(){for(var t=this.video,e=0;e<i.length;e++)t.removeEventListener(i[e],this.videoHandlerBack,!0)},t.prototype.videoHandler=function(t){switch(t.type){case"error":if("firefox"==a.getBrowser()&&null==this.video.error)break;
if(this.video.error&&4==this.video.error.code&&0<this.getTime())break;t={code:A.PLAY_TIMEOUT},this.video.error&&this.video.error.hasOwnProperty("code")&&(t.code="49"+this.video.error.code),this.errorHandler(t);break;case"playing":this.startPlay||this.onMetaDataHandler({width:this.video.videoWidth,height:this.video.videoHeight,duration:this.video.duration}),this.autoSeek(),this.isEndStartSeek&&this.onPlayFullHandler(),this.isStartSeek&&(this.isEndStartSeek=!0);break;case"emptied":case"waiting":this.onPlayEmptyHandler();break;case"seeked":this.isEndStartSeek=!0,this.onPlayFullHandler();break;case"seeking":this.onPlaySeekHandler();break;case"play":this.onPlayHandler();break;case"pause":this.onPauseHandler();break;case"ended":this.onPlaStopHandler();break;case"timeupdate":this.display||this.setSize(),this.isEndStartSeek&&this.onPlayIngHandler();break;case"progress":this.onLoadIngHandler();break;case"durationchange":case"loadedmetadata":this.onMetaDataHandler({width:this.video.videoWidth,height:this.video.videoHeight,duration:this.video.duration})}},t.prototype.autoSeek=function(){var t=this;this.log("autoSeek:"+t.config.start+"--"+t.startPlay+"-"+t.isEndStartSeek),0!=t.config.start?t.startPlay||t.isEndStartSeek?t.isStartSeek=!0:setTimeout(function(){t.isStartSeek=!0,t.seek(t.config.start)},500):t.isStartSeek=!0},t.prototype.getLoadPercent=function(){for(var t=this.video.buffered,e=0;e<t.length;e++)if(this.getTime()<t.end(e))return Math.min(1,t.end(e)/this.video.duration);return 0},t.prototype.play=function(t,e,i,o){var n=this;n.hasMetadata=!1,n.playUrlList=t,n.config.start=e,n.url=n.playUrlList[0],n.isEndStartSeek=0<n.config.start?!1:!0,n.isStartSeek=!1,this.isFtc=n.startPlay=!1,this.render||(this.render=new X),this.render.init({type:o,video:this.video,el:this.vArea,onstart:function(){n.log("渲染引擎初始化完毕，回调播放, url:"+n.url),n.addEvents(),n.video.src=n.url,(n.autoplay||i)&&(n.video.load&&n.video.load(),n.video.play())},onerror:function(t){n.log("渲染引擎初始化失败"),t.retryCdn=!1,n.errorHandler(t)}})},t.prototype.resume=function(){this.video.play&&this.video.play()},t.prototype.pause=function(){this.video.pause()},t.prototype.getTime=function(){return this.video.currentTime},t.prototype.seek=function(t){this.log("seek:"+t),this.video.currentTime=t},t.prototype.changeurl=function(t){this.url=t,this.video.src=this.url,this.config.start=this.getTime(),this.isEndStartSeek=0<this.config.start?!1:!0,this.video.load(),this.video.play()},t.prototype.setVol=function(t){this.video.volume=t},t.prototype.getVol=function(){return this.video.volume},t.prototype.stop=function(){this.destroy()},t.prototype.getVideoRect=function(){return{w:this.video.offsetWidth,h:this.video.offsetHeight}},t}(),X=function(){function t(){}var e={pano:{name:"PanoRender",check:a.checkPano,err:{code:"",message:""}}};return E.inherits(t,V),t.prototype.init=function(t){this.isStart=!1,this.options=t,this.log("初始化渲染引擎"+this.eg),this.eg?t.type!=this.eg.type?this.eg=null:this.eg.reset(t):this.eg=this.initPlugin(t,this.pluginOk,e)},t.prototype.pluginOk=function(t){this.eg=t?new t(this.options):null},t.prototype.start=function(){this.isStart||(this.isStart=!0,this.eg&&this.eg.start())},t.prototype.close=function(){this.log("关闭渲染引擎"+this.eg),this.eg&&this.eg.close(),this.isStart=!1},t.prototype.setSize=function(t,e){this.eg&&this.eg.setSize(t,e)},t}(),$=function(){function t(t){this.init(t)}return E.inherits(t,L),t.prototype.init=function(t){this.time=0,this.config=t},t.prototype.setUp=function(t,e){var i=a.clone(this.config),o=["pic","volume"];this.loop=!1,this.el=e,this.volume=t.volume;for(var n=0;n<o.length;n++){var s=o[n];!i.hasOwnProperty(s)&&t.hasOwnProperty(s)&&(i[s]=t[s])}this.creatPlayer(i,e),this.player.duration=t.duration},t.prototype.creatPlayer=function(t,e){this.player&&(this.player.removeEventListener(F.EVENT,this.MediaHanlder,this),this.player.destroy(),this.player=null),this.player=this.getPlayer(t),this.player.init(),this.player.setUp(t,e)},t.prototype.setMedia=function(){},t.prototype.hide=function(t){this.player.hide(t)},t.prototype.show=function(){this.player.show()},t.prototype.setConfig=function(){},t.prototype.setContainer=function(t){null!=t&&this.player.setContainer(t)},t.prototype.getPlayer=function(){return new K},t.prototype.startPlay=function(t,e,i,o){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=!1),"undefined"==typeof o&&(o=""),this.destroy(),this.setVol(this.volume),this.player.addEventListener(F.EVENT,this.MediaHanlder,this),this.player.mduration=t.duration,this.player.play(t.urls,e,i,o)},t.prototype.setSize=function(){this.player.setSize()},t.prototype.play=function(){this.player.resume()},t.prototype.setVol=function(t){this.player.setVol(t)},t.prototype.pause=function(){this.player.pause()},t.prototype.destroy=function(){this.closeVideo(),this.loop=!1,this.player.setLoop(!1),this.player.destroy()},t.prototype.closeVideo=function(){this.player.removeEventListener(F.EVENT,this.MediaHanlder,this),this.player.stop()},t.prototype.getTime=function(){return parseInt(this.player.getTime())},t.prototype.seek=function(t){t>=0&&0>t-this.player.duration&&(this.player.seek(t),this.player.resume())},t.prototype.getBufferPercent=function(){return 1},t.prototype.getLoadPercent=function(){return this.player.getLoadPercent()},t.prototype.setLoop=function(t){this.loop=t,this.player.setLoop(t)},t.prototype.MediaHanlder=function(t){switch(t.args[1]){case F.STOP:if(this.loop)return void this.seek(0)}this.dispatchEvent(t)},t.prototype.changeurl=function(t){this.player.changeurl(t)},t.prototype.getVideoRect=function(){return this.player.getVideoRect()},t.prototype.replay=function(){this.player.seek(0),this.dispatchEvent(new O(F.EVENT,F.REPLAY,this.getTime()))},t.prototype.getVideoEl=function(){return this.player.video},t.prototype.setPoster=function(t){return this.player.setPoster(t)},t}(),J=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,D),t.prototype.init=function(){this.tplKey="controlBar",this.isSeeking=this.addEvent=!1,this.duration=this.model.videoSetting.duration},t.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0);var e=this;this.el.playBtn.addEventListener("click",function(){e.facade.dispatchEvent(new O(M.EVENT,M.PLAY))}),this.el.pauseBtn.addEventListener("click",function(){e.facade.dispatchEvent(new O(M.EVENT,M.PAUSE))}),this.el.definition.addEventListener("mouseover",function(){e.definitionListShow.apply(e,arguments)}),this.el.definitionList.addEventListener("mouseover",function(t){"touchstart"!=t.type&&e.definitionListShow.apply(e,arguments)}),this.el.definition.addEventListener("mouseout",function(){e.definitionListHide.apply(e,arguments)}),this.el.definitionList.addEventListener("mouseout",function(){e.definitionListHide.apply(e,arguments)}),this.el.fullScreen.addEventListener("click",function(){e.facade.dispatchEvent(new O(M.EVENT,M.FULLSCREEN))}),this.el.playBarIco.drag({rect:function(){var t=e.el.playBarIco.getY(),i=e.el.playIngBar.getWidth();return{x:0,y:t,w:i,h:0}},onDown:function(){e.isSeeking=!0},onMove:function(){e.seekHanler.apply(e,[!1])},onUp:function(){e.seekHanler.apply(e,[!0]),e.isSeeking=!1}}),this.el.playIngBar.addEventListener("click",function(t){var i=u.getPos(e.el.playIngBar.el);t=u.getMousePoint(t),e.el.playBarIco.setX(t.x-i.x),e.seekHanler.apply(e,[!0])}),this.el.playBtn.setVisible(!1),this.el.playBar.setWidth("0%"),this.el.playBarIco.setX(0),this.el.bufferBar.setWidth("0%"),this.el.definitionList.setVisible(!1),this.el.volBox.setVisible(!1),this.setSize(this.el.offsetWidth,this.el.offsetHeight),"live"==this.model.playType&&this.el.playIngBar.setVisible(!1),this.model.config.playIngBg||this.el.playIngBg.setVisible(!1),this.el.fullScreenBox.setVisible(this.model.config.fullscreen),this.el.definition.setVisible(this.model.config.definition)},t.prototype.seekHanler=function(t){var e;this.playRate=(.5*this.el.playBarIco.getWidth()+this.el.playBarIco.getX())/this.el.playIngBar.getWidth(),this.el.playBar.setWidth(100*this.playRate+"%"),e=this.playRate*this.duration,this.el.time.html(a.num2Time(this.playRate*this.duration)),t&&this.facade.dispatchEvent(new O(M.EVENT,M.SEEK,e))},t.prototype.setSize=function(t,e,i){if(i=12,this.el.logo.getVisible()&&0<this.el.logo.getWidth()&&this.el.logo.getHeight()){switch(this.logoInfo.pos){case"left":this.el.logo.setX(i),i=i+this.el.logo.getWidth()+12;break;case"right":this.el.logo.setX(t),t=t-this.el.logo.getWidth()-12}this.el.logo.setY(.5*(e-this.el.logo.getHeight()))}this.el.playBtnBox.setX(i),i+=this.el.playBtnBox.getWidth(),this.el.fullScreenBox.getVisible()&&(t=t-this.el.fullScreenBox.getWidth()-24,this.el.fullScreenBox.setX(t)),this.el.definition.getVisible()&&(t=t-this.el.definition.getWidth()-12,this.el.definition.setX(t)),this.el.volBox.getVisible()&&(t=t-this.el.volBox.getWidth()-12,this.el.volBox.setX(t)),t-=24,i+=12,this.el.playIngBar.setX(i),this.el.playIngBar.setWidth(t-i)},t.prototype.skinAction=function(t,e){switch(t){case P.DURATION:"live"==this.model.playType&&this.model.liveback&&this.el.playIngBar.setVisible(!0),this.duration=e.duration,this.el.duration.html(a.num2Time(this.duration));break;case P.TIME:"live"==this.model.playType&&this.model.liveback&&this.el.playIngBar.setVisible(!0),0<this.duration&&(this.playRate=e/this.duration,this.isSeeking||(this.el.playBar.setWidth(100*this.playRate+"%"),this.el.playBarIco.setX(100*this.playRate+"%"),this.el.time.html(a.num2Time(e))));break;case P.BUFFER:this.loadingRate=e,this.el.bufferBar.setWidth(100*this.loadingRate+"%");break;case P.CHANGESTATEPLAY:switch(e){case k.PLAY:this.el.playBtn.setVisible(!1),this.el.pauseBtn.setVisible(!0);break;case k.STOP:case k.PAUSE:this.el.playBtn.setVisible(!0),this.el.pauseBtn.setVisible(!1)}break;case P.DEFINITIONS:this.setUpDefinitionList(e);break;case P.DEFINITION:this.setUpDefinition(e);break;case P.CONTROLVISIBLE:e?this.skin.removeClassName("hCrtBar"):this.skin.addClassName("hCrtBar");break;case P.LOGO:this.setUpControlbarLogo(e)}},t.prototype.definitionListShow=function(t){var e=this;if(!(1>=e.elDeList.length)){clearTimeout(e.deTimeoutId),e.el.definitionList.setVisible(!0);var i=this.el.definition.getY()-this.el.definitionList.getHeight()-5,o=this.el.definition.getX()+.5*this.el.definition.getWidth()-.5*this.el.definitionList.getWidth();this.el.definitionList.setY(i),this.el.definitionList.setX(o),"undefined"!=typeof t&&"touchstart"==t.type&&(e.deTimeoutId=setTimeout(function(){e.el.definitionList.setVisible(!1)},5e3))}},t.prototype.definitionListHide=function(t){var e=this;1>=e.elDeList.length||(clearTimeout(e.deTimeoutId),t?e.deTimeoutId=setTimeout(function(){e.el.definitionList.setVisible(!1)},200):e.el.definitionList.setVisible(!1))},t.prototype.setUpDefinitionList=function(t){if(this.el.definitionList.html(""),this.elDeList=[],1>=t.length)this.el.definitionList.setVisible(!1);else for(var e=0;e<t.length;e++){var i=new R(u.$C("DIV"));i.setClassName("text button litem"),i.setAttribute({ratedata:t[e].rate}),i.html(t[e].name),this.elDeList.push(i),this.el.definitionList.appendChild(i),this.addDefinitionItemEvents(i)}},t.prototype.addDefinitionItemEvents=function(t){var e=this;t.addEventListener("click",function(){this.hasAttribute("checked")||(e.definitionListHide(!1),e.facade.dispatchEvent(new O(M.EVENT,M.SETDEFINITION,this.getAttribute("rateData"))))})},t.prototype.setUpDefinition=function(t){this.el.definition.html(t.name);for(var e=0;e<this.elDeList.length;e++){var i=this.elDeList[e];i.getAttribute("ratedata")==t.rate?(i.addClassName("activeText"),i.setAttribute({checked:1})):(i.removeClassName("activeText"),i.removeAttribute("checked"))}this.setSize.call(this,this.el.offsetWidth,this.el.offsetHeight)},t.prototype.setUpControlbarLogo=function(t){var e=this;if(e.logoInfo=t,e.el.logo.html(""),""!=e.logoInfo.pic){var i,o=u.$C("IMG");""!=e.logoInfo.url?(i=u.$C("A"),i.href=e.logoInfo.url,i.target="_blank",i.style.display="block",i.appendChild(o)):i=o,o.onload=function(){e.el.logo.appendChild(i),o.height>.9*e.el.offsetHeight&&(o.width=o.width*e.el.offsetHeight*.9/o.height,o.height=.9*e.el.offsetHeight),e.el.logo.setVisible(!0),e.setSize.call(e,e.el.offsetWidth,e.el.offsetHeight)},o.src=this.logoInfo.pic}},t}(),Z=(function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,D),t.prototype.init=function(){this.tplKey="error",this.addEvent=!1},t.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0),this.skin.setVisible(!1)},t.prototype.skinAction=function(t,e){switch(t){case P.ERROR:this.skin.setVisible(!0);var i="",i=e.hasOwnProperty("message")&&""!=e.message?e.message:"播放失败了，不如刷新一下试试";this.el.message.html(i),this.el.errCode.html("<"+e.code+">"),i=.5*(this.el.offsetHeight-(this.el.message.getHeight()+this.el.errCode.getHeight())),this.el.message.setY(i),this.el.errCode.setY(i+this.el.message.getHeight());break;case P.ERRORHIDE:this.skin.setVisible(!1),this.el.message.html(""),this.el.errCode.html("")}},t}(),function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,D),t.prototype.init=function(){this.tplKey="loading",this.addEvent=!1},t.prototype.setUp=function(t){this.superClass.setUp.call(this,t,!0)},t.prototype.setSize=function(t,e,i){this.loading&&((this.loading.getWidth()>t||this.loading.getHeight()>e)&&(i=this.loading.getWidth()/this.loading.getHeight(),this.loading.getWidth()/this.loading.getHeight()>t/e?(this.loading.setWidth(parseInt(t)),this.loading.setHeight(parseInt(t/i))):(this.loading.setHeight(parseInt(e)),this.loading.setWidth(parseInt(e*i)))),this.loading.setStyle({marginLeft:-.5*this.loading.getWidth()+"px",marginTop:-.5*this.loading.getHeight()+"px"}))},t.prototype.skinAction=function(t,e){switch(t){case P.LOADING:var i=this;if(e.show){if(e.hasOwnProperty("type")&&0==e.type||""==e.url)i.el.bld.setVisible(!1),i.el.sld.setVisible(!0);else if(i.el.bld.setVisible(!0),i.el.sld.setVisible(!1),i.el.bld.getAttribute("url")!=e.url){i.el.bld.html(""),i.loading&&(i.loading.el.onload=null,i.loading=null);var o=u.$C("img");o.onload=function(){i.el.bld.html(""),i.loading=new R(o),i.el.bld.appendChild(this),i.el.bld.setAttribute({url:e.url}),i.setSize(i.skin.getWidth(),i.skin.getHeight()),this.onload=null},o.src=e.url}else i.setSize(i.skin.getWidth(),i.skin.getHeight());this.skin.setVisible(!0)}else this.skin.setVisible(!1)}},t}()),Q=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,D),t.prototype.init=function(){this.tplKey="playbtn",this.addEvent=!1},t.prototype.setUp=function(t){var e=this;e.superClass.setUp.call(this,t,!0),e.skin.setVisible(!1),e.skin.addEventListener("click",function(){e.facade.dispatchEvent(new O(M.EVENT,M.PLAY))})},t.prototype.setSize=function(){},t.prototype.skinAction=function(t,e){switch(t){case P.CHANGESTATEPLAY:switch(e){case k.PLAY:this.skin.setVisible(!1);break;case k.STOP:case k.PAUSE:this.skin.setVisible(!0)}}},t}(),te=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,D),t.prototype.init=function(){this.superClass.init.apply(this,arguments),this.tplKey="skin",this.facade=new x},t.prototype.setUp=function(t){this.superClass.setUp.call(this,t),this.controlBar=new J(this.facade,this.model),this.controlBar.setUp(this.el.controlBar),this.loading=new Z(this.facade,this.model),this.loading.setUp(this.el.loading),this.bigPlaybtn=new Q(this.facade,this.model),this.bigPlaybtn.setUp(this.el.playBtn)},t.prototype.skinHandler=function(t){this.dispatchEvent(t)},t.prototype.skinInit=function(){this.skin.setVisible(!0),this.controlBar.skinAction(P.LOGO,a.clone(this.model.playerConfig.logo))},t.prototype.skinAction=function(t,e){this.controlBar.skinAction(t,e),this.loading.skinAction(t,e),this.bigPlaybtn.skinAction(t,e)},t.prototype.setSize=function(){this.controlBar.setSize(this.controlBar.skin.getWidth(),this.controlBar.skin.getHeight()),this.loading.setSize(this.loading.skin.getWidth(),this.loading.skin.getHeight()),this.bigPlaybtn.setSize()},t}(),ee=function(){function t(t){this.model=t}return E.inherits(t,L),t.prototype.translate=function(){this.gslbLoader=new W(this.model),this.model.videoSetting.gslb?(this.gslbLoader.addEventListener(U.LOADCMP,this.gslbCmp,this),this.gslbLoader.addEventListener(U.LOADERROR,this.gslbErr,this),this.gslbLoader.load()):this.dispatchEvent(new O(U.LOADCMP,this.leUrlsHandler()))},t.prototype.gslbCmp=function(t){this.dispatchEvent(new O(U.LOADCMP,t.args[1]))},t.prototype.gslbErr=function(){this.dispatchEvent(new O(U.LOADCMP,this.leUrlsHandler()))},t.prototype.leUrlsHandler=function(t){t=a.clone(this.model.videoSetting.urls);for(var e=0;e<t.length;e++)t[e]=this.gslbLoader.checkGslbUrl(t[e]);return t},t}(),ie=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,I),t.prototype.init=function(t,e){this.facade=t,this.model=e,this.model.record={},this.reportApi=new j(e),this.reportApi.onStateChanged("init",{deviceId:this.model.lc(),os:a.getOs(),osv:"-",width:window.screen.width,height:window.screen.height,appv:this.model.playerConfig.version})},t.prototype.setUp=function(){this.model.videoSetting.errCode=0,this.facade.addEventListener(B.EVENT,this.videoSateHandler,this)},t.prototype.destroy=function(){this.superClass.destroy.apply(this,arguments),this.reportApi.reset(),this.facade.removeEventListener(B.EVENT,this.videoSateHandler,this)},t.prototype.videoSateHandler=function(t){switch(t.args[1]){case B.VIDEO_DATA_CMP:0!=this.model.record.ms&&(this.model.record.mr=a.now()-this.model.record.ms,this.model.record.ms=0),this.reportApi.onStateChanged("start",{});break;case F.BUFFEREMPTY:this.reportApi.onStateChanged("bufferEmpty");break;case F.BUFFEREFULL:this.reportApi.onStateChanged("bufferFull");break;case F.PLAY:this.reportApi.onStateChanged("resume");break;case F.START:0!=this.model.record.vs&&(this.model.record.pr=a.now()-this.model.record.vs,this.model.record.vs=0),this.reportApi.onStateChanged("play",{cv:{stc:{mr:this.model.record.mr,adr:this.model.record.adr,pr:this.model.record.pr,gslbr:this.model.record.gslbr},joint:this.model.joint}});break;case F.STOP:this.reportApi.onStateChanged(t.args[2]?"playStop":"stopPlay");break;case F.PAUSE:this.reportApi.onStateChanged("pause");break;case F.SEEK:this.reportApi.onStateChanged("seek",{time:t.args[2]});break;case B.VPH:this.reportApi.onStateChanged("hide");break;case B.VPS:this.reportApi.onStateChanged("show");break;case F.DEFSTART:this.reportApi.onStateChanged("definition");break;case B.ERROR:case F.ERROR:t=t.args[2][0],this.model.videoSetting.errCode=t.code,this.reportApi.onStateChanged("error",{errcode:t.code}),this.report({logcontent:t.errInfo||""});break;case H.HEADEND:case H.NOAD:0!=this.model.record.as&&(this.model.record.adr=a.now()-this.model.record.as,this.model.record.as=0),this.model.record.vs=a.now();break;case B.VIDEO_DATA_START:this.model.record.ms=a.now();break;case B.GSLB_START:this.model.record.gslbs=a.now();break;case B.GSLB_CMP:0!=this.model.record.gslbs&&(this.model.record.gslbr=a.now()-this.model.record.gslbs,this.model.record.gslbs=0),this.model.record.vs=a.now()}},t.prototype.report=function(t){var e=this.model.videoSetting.errCode;t&&t.hasOwnProperty("code")&&(e=t.code);var i={ver:"1.0"};i.uuid=this.model.uuid(),i.ec=e,i.p3="h5",i.cvid="vod"==this.model.playType?this.model.videoSetting.vid:this.model.videoSetting.sid,i.vtyp=this.model.playType,i.mtyp="cloud",i.cuid=this.model.userData.userId,i.leid=this.model.lc(),i.pver=this.model.playerConfig.version,i.type=1,i.logcontent="";for(var o in t)i[o]=t[o];m.report("http://log.cdn.letvcloud.com/sdk/epl",i)},t.prototype.showLog=function(){m.print(g.getLog(),this.model.lc())},t.prototype.getLog=function(){return g.getLog()},t}(),oe=function(){function t(){this.up=this.isvip=0,this.isTrylook=!1,this.pname="",this.ark=this.gdur=0}function e(){this.superClass.constructor.apply(this,arguments)}var i="http://yuntv.letv.com/player/plugin/adPlayer.js";return"https:"==window.location.protocol&&(i=i.replace("http://","https://s.")),E.inherits(e,I),e.prototype.setUp=function(t,e){var i=this;if(i.player=t,i.videoOutEl=e,i.model.config.hasOwnProperty("onPlayerReady"))if("function"!=typeof i.model.config.onPlayerReady&&(i.model.config.onPlayerReady=window[i.model.config.onPlayerReady]),"function"==typeof i.model.config.onPlayerReady)try{var o=setTimeout(function(){i.startLeAd.call(i)},5e3);i.model.config.onPlayerReady({video:i.player.player.video,el:this.videoOutEl},function(t){switch(t){case"adstart":clearTimeout(o);break;case"adend":i.startLeAd.call(i)}})}catch(n){i.startLeAd.call(i)}else i.startLeAd.call(i);else i.startLeAd.call(i)},e.prototype.startLeAd=function(){this.checkAd()?"undefined"==typeof H5AD||"function"!=typeof H5AD.initAD?a.getJS(i,this.initAd,this.initAd,this,"utf-8"):this.initAd():this.facade.dispatchEvent(new O(H.EVENT,H.NOAD,"skip"))},e.prototype.checkAd=function(){return this.model.config.hasOwnProperty("letvad")&&"0"==this.model.config.letvad.toString()||this.model.videoSetting.hasOwnProperty("ark")&&"0"==this.model.videoSetting.ark.toString()?!1:!0},e.prototype.initAd=function(){function i(t,e){if(o.log(t),o.player)switch(t){case"playAD":o.adList=e,o.adList&&0==o.adList.length?setTimeout(function(){o.destroy(),o.facade.dispatchEvent(new O(H.EVENT,H.NOAD))},0):(o.curAdIndex=0,o.playAD(),o.facade.dispatchEvent(new O(H.EVENT,H.HEADSTART)));break;case"stopAD":setTimeout(function(){o.destroy(),o.facade.dispatchEvent(new O(H.EVENT,H.HEADEND))},0);break;case"resumeAD":o.videoPlay();break;case"pauseAD":o.videoPause();break;case"getCurrTime":return o.getTime()||0;case"getVideoRect":return o.getVideoRect()}}var o=this;if("undefined"!=typeof H5AD&&"function"==typeof H5AD.initAD){var n=new t;n.p1=this.model.reportParam.p1,n.p2=this.model.reportParam.p2,n.p3=this.model.reportParam.p2,n.lc=this.model.lc(),n.uuid=this.model.uuid(),n.ver=this.model.playerConfig.version,n.gdur=this.model.videoSetting.duration,n.cont=this.videoOutEl.id,"vod"==this.model.playType?(n.islive=!1,n.cid=this.model.videoSetting.cid,n.vid=this.model.videoSetting.vid,n.mmsid=this.model.videoSetting.mmsid,this.model.videoSetting.hasOwnProperty("pid")&&(n.pid=this.model.videoSetting.pid)):"live"==this.model.playType&&(n.islive=!0,n.sid=this.model.config.activityId),n.ch=this.model.getTypeFrom(),n.ark=this.model.videoSetting.ark,n.useui=1,H5AD.initAD(n,i)}else this.facade.dispatchEvent(new O(H.EVENT,H.NOAD,"error"));e.prototype.playAD=function(){if(this.curAdIndex<this.adList.length){this.curAd=this.adList[this.curAdIndex],this.player.addEventListener(F.EVENT,this.mediaHandler,this);var t=!0;0==this.curAdIndex&&-2==this.model.config.posterType&&(t="1"==this.model.config.autoplay),this.player.startPlay({urls:[this.curAd.url]},0,t)}else this.destroy(),this.facade.dispatchEvent(new O(H.EVENT,H.HEADEND))},e.prototype.mediaHandler=function(t){switch(t.args[1]){case F.PLAY:H5AD.sendEvent("AD_PLAY",{curAD:this.curAd,curIndex:this.curAdIndex});break;case F.PAUSE:H5AD.sendEvent("AD_PAUSE",{curAD:this.curAd,curIndex:this.curAdIndex});break;case F.STOP:H5AD.sendEvent("AD_ENDED",{curAD:this.curAd,curIndex:this.curAdIndex}),this.curAdIndex++,H5AD.destory(this.curAd),this.playAD();break;case F.ERROR:H5AD.sendEvent("AD_ERROR",{curAD:this.curAd,curIndex:this.curAdIndex}),this.curAdIndex++,H5AD.destory(this.curAd),this.playAD()}},e.prototype.videoPlay=function(){this.player&&this.player.play()},e.prototype.getTime=function(){return this.player?this.player.getTime():0},e.prototype.videoPause=function(){this.player&&this.player.pause()},e.prototype.getVideoRect=function(){return this.player?this.player.getVideoRect():{w:0,h:0}},e.prototype.destroy=function(){this.player&&(this.player.removeEventListener(F.EVENT,this.mediaHandler,this),this.player.closeVideo(),this.player=null);try{H5AD&&this.curAd&&H5AD.destory(this.curAd)}catch(t){this.log("ad error "+t)}}},e}(),ne=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,I),t.prototype.setUp=function(t,e,i){t='<div id="#{video}" style="left:0px;top:0px;position: absolute;width:{width};height:{height};z-index:1;display: block;background-color: #000000;overflow:hidden"></div><div id="#{skin}" style="left:0px;top:0px;position: relative;width:{width};height:{height};z-index:2;overflow: hidden;"></div><div id="#{error}" style="left:0px;top:0px;position: absolute;width:{width};height:{height};z-index:3;overflow: hidden;display:none;"></div>'.replace(/{width}/g,"100%"),t=t.replace(/{height}/g,"100%"),this.el=u.$E(e),this.outEl=u.$E(i),this.setStylebyConfig(this.model.config),this.skin=new R(this.el),u.getTemplate(this.el,t),this.model.config.skinnable?(this.facade.addEventListener(B.EVENT,this.videoSateHandler,this),this.skinView=new te(this.facade,this.model),this.skinView.addEventListener(M.EVENT,this.skinHandler,this),this.skinView.setUp(this.el.skin),this.skinView.skinAction(P.CONTROLVISIBLE,!1),this.skinView.skin.setVisible(!1)):this.el.removeChild(this.el.skin)},t.prototype.setStylebyConfig=function(t){var e=["controls","fullscreen"],i="vb"+a.creatUuid();this.el.className=i;for(var o=0;o<e.length;o++)t[e[o]]||(t.pageControls?b["setMedia"+e[o]]("",!1):b["setMedia"+e[o]](i,!1))},t.prototype.getVideArea=function(){return this.el.skin.videoArea||null},t.prototype.autoSize=function(){var t=this.model.videoSetting.videoWidth,e=this.model.videoSetting.videoHeight;if(0!=t&&0!=e)switch(t/=e,this.model.config.autoSize){case"1":e=u.$E(this.el).offsetWidth,this.log("获得容器的宽度=============================="+e),0==e&&(e=u.$E(this.outEl).style.width,e=-1==e.indexOf("%")?parseInt(e):0),this.log("获得容器的宽度=============================="+e),e>0&&(this.model.config.changeParent&&(this.outEl.style.height=e/t+"px"),this.el.style.height=e/t+"px");break;case"2":e=u.$E(this.el).offsetHeight,0==e&&(e=u.$E(this.outEl).style.height,e=-1==e.indexOf("%")?parseInt(e):0),e>0&&(this.model.config.changeParent&&(this.outEl.style.width=e*t+"px"),this.el.style.width=e*t+"px")}},t.prototype.setSize=function(){0<this.el.offsetWidth&&0<this.el.offsetHeight?(this.display=!0,this.skinView&&this.skinView.setSize()):this.display=!1},t.prototype.addEvents=function(){this.skinView&&(this.hideFun=a.bindFun(this.autoHide,this),this.showFun=a.bindFun(this.autoShow,this),this.skinView.skin.addEventListener("mouseout",this.hideFun),this.skinView.skin.addEventListener("mouseover",this.showFun))},t.prototype.removeEvents=function(){this.skinView&&this.hideFun&&this.showFun&&(this.skinView.skin.removeEventListener("mouseout",this.hideFun),this.skinView.skin.removeEventListener("mouseover",this.showFun))},t.prototype.autoHide=function(){this.skinView&&(this.timer&&this.timer.reset(),this.skinView.skinAction(P.CONTROLVISIBLE,!1))},t.prototype.autoShow=function(t){this.skinView&&(this.skinView.skinAction(P.CONTROLVISIBLE,!0),"undefined"==typeof t||"mouseover"!=t.type)&&(this.timer?this.timer.reset():this.timer=new _(5e3,this,this.autoHide,1),this.timer.start())},t.prototype.destroy=function(){this.shutDown(),this.skinView&&(this.facade.removeEventListener(B.EVENT,this.videoSateHandler,this),this.skinView.removeEventListener(M.EVENT,this.skinHandler,this),this.removeEvents(),this.skinView=null)},t.prototype.skinHandler=function(t){this.facade.dispatchEvent(t)},t.prototype.shutDown=function(){this.skinView&&(this.skinView.skinAction(P.BUFFER,0),this.skinView.skinAction(P.TIME,0),this.skinView.skinAction(P.LOADING,{show:!1}),this.skinView.skinAction(P.CONTROLVISIBLE,!1),this.skinView.skin.setVisible(!1),this.removeEvents())},t.prototype.videoSateHandler=function(t){switch(t.args[1]!==F.LODING&&t.args[1]!=F.PLAYING&&this.log(t.args[1]),t.args[1]){case F.SEEKEMPTY:case F.BUFFEREMPTY:this.skinView.skinAction(P.LOADING,{show:!0,url:this.model.playerConfig.loadingUrl,type:"0"});break;case F.BUFFEREFULL:this.skinView.skinAction(P.LOADING,{show:!1});break;case F.START:this.skinView.skinAction(P.LOADING,{show:!1}),this.addEvents(),this.autoShow(),this.model.config.onlyPic&&this.skinView.skinAction(P.CHANGESTATEPLAY,k.PAUSE);break;case F.PLAY:this.model.config.onlyPic||this.skinView.skinAction(P.CHANGESTATEPLAY,k.PLAY);break;case F.STOP:this.skinView.skinAction(P.LOADING,!1),this.skinView.skinAction(P.CHANGESTATEPLAY,k.STOP),this.autoShow(),this.timer.stop();break;case F.PAUSE:this.skinView.skinAction(P.CHANGESTATEPLAY,k.PAUSE),this.autoShow();break;case F.SEEK:this.skinView.skinAction(P.TIME,t.args[2]),this.autoShow();break;case F.PLAYING:this.skinView.skinAction(P.TIME,t.args[2]),this.display||this.facade.dispatchEvent(new O(B.EVENT,B.PRESIZE));break;case F.DURATION:case F.METADATA:this.skinView.skinAction(P.DURATION,t.args[2]);break;case F.LODING:this.skinView.skinAction(P.BUFFER,t.args[2]);break;case F.ERROR:case B.ERROR:case B.VIDEO_INFO:this.skinView.skin.setVisible(!0),this.skinView.skinAction(P.LOADING,{show:!1,url:this.model.playerConfig.mloadingUrl}),this.autoHide();break;case H.HEADSTART:this.skinView.skinAction(P.LOADING,{show:!1,url:this.model.playerConfig.mloadingUrl});break;case F.CONNECT:this.skinView.skinInit(),this.skinView.skinAction(P.LOADING,{show:!0,url:this.model.playerConfig.mloadingUrl}),this.skinView.skinAction(P.DEFINITIONS,this.getDefinitionList()),this.skinView.skinAction(P.DEFINITION,this.getDefinition()),this.autoHide();break;case F.DEFSTART:this.skinView.skinAction(P.LOADING,{show:!0,url:this.model.playerConfig.loadingUrl,type:"0"}),this.skinView.skinAction(P.DEFINITION,this.getDefinition());break;case B.VIDEO_AUTH_VALID:this.skinView.skin.setVisible(!1);break;case B.PRESIZE:this.setSize()}},t.prototype.getDefinition=function(){var t={},e=this.model.videoSetting;return t.rate=e.definition,t.name=e.media[t.rate].definition,t},t.prototype.getDefinitionList=function(){for(var t=[],e=this.model.videoSetting,i=0;i<e.definitionList.length;i++){var o={};o.rate=e.definitionList[i],o.name=e.media[o.rate].definition,t.push(o)}return t},t.prototype.setVideoPercent=function(){},t.prototype.setVideoScale=function(){},t.prototype.setVideoRect=function(){},t}(),se=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,I),t.prototype.setUp=function(t,e){this.log("开始创建视频模块"),this.el=e,this.mediaPlayer=new $(this.getConfig()),this.model.videoSetting.volume=.8,this.model.videoSetting.fullscreen=!1,this.setDefinitionList(),this.getDefaultConfig(this.model.config),this.changeVideoInfo(this.definition),this.mediaPlayer.setUp(this.model.videoSetting,e),this.facade.dispatchEvent(new O(B.EVENT,B.INIT))},t.prototype.getConfig=function(t){switch(t=a.clone(this.model.config),t.posterType){case"-1":case"-2":break;default:t.autoplay="1",t.pic=""}return t},t.prototype.changeVideoInfo=function(t){this.videoInfo=a.clone(this.model.videoSetting.media[t]),this.videoInfo.definitionName=this.videoInfo.definition,this.videoInfo.definition=t,t={uuid:this.model.uuid(),p1:this.model.reportParam.p1,p2:this.model.reportParam.p2,p3:this.model.reportParam.p3},this.model.videoSetting.hasOwnProperty("liveId")&&(t.liveid=this.model.videoSetting.liveId,this.videoInfo.lid=this.model.videoSetting.liveId),this.model.videoSetting.hasOwnProperty("vid")&&(t.vid=this.model.videoSetting.vid),t.ajax=1,a.addUrlParams(this.videoInfo.urls,t),this.model.videoSetting.refresh(this.videoInfo)},t.prototype.setDefinitionList=function(){var t,e=[];for(t in this.model.videoSetting.media)e.push(t);this.model.videoSetting.refresh({definitionList:e})},t.prototype.getDefaultConfig=function(t){this.definition=this.model.videoSetting.defaultDefinition||this.model.videoSetting.definitionList[0],t.hasOwnProperty("rate")&&-1!=this.model.videoSetting.definitionList.indexOf(t.rate)&&(this.definition=t.rate),this.startime=0,t.hasOwnProperty("start")&&(this.startime=t.start)},t.prototype.setSize=function(){this.mediaPlayer.setSize()},t.prototype.showPoster=function(){var t=this;switch(t.hidePoster(),t.poster=null,t.mediaPlayer.hide(!1),this.model.config.posterType){case"-2":case"-1":t.mediaPlayer.show();
break;case"0":break;default:t.addPoster()}-2==this.model.config.posterType?(this.mediaPlayer.setPoster(this.model.videoSetting.pic),this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_AUTH_VALID))):(this.model.config.skinnable||this.model.config.controls)&&(t.playBtn=u.$C("DIV"),t.playBtn.style.cssText="position:absolute;width:75px;height:75px;left:50%;top:50%;background:rgba(1, 1, 1, 0) url(http://yuntv.letv.com/assets/img/skin.png?v=1901) no-repeat -111px -101px;margin: -40px 0 0 -38px;z-index:2;cursor:pointer;",t.el.appendChild(t.playBtn),u.addEvent(t.playBtn,"click",function(){t.startAuth.call(t)}))},t.prototype.addPoster=function(){this.poster?this.poster.style.display="":(this.poster=u.$C("DIV"),this.poster.src=this.model.config.hasOwnProperty("pic")?this.model.config.pic:this.model.videoSetting.pic,this.poster.style.cssText="position:absolute;width:100%;height:100%; top: 0px;left: 0px;background:rgba(1, 1, 1, 0) url("+this.poster.src+") no-repeat 50% 50%;background-size:"+["","contain","cover","100% 100%"][this.model.config.posterType]+";z-index:2;cursor:pointer;"),this.el.appendChild(this.poster)},t.prototype.hidePoster=function(){this.poster&&this.el&&this.poster.parentNode==this.el&&(this.el.removeChild(this.poster),this.poster=null),this.playBtn&&this.el&&this.playBtn.parentNode==this.el&&(this.el.removeChild(this.playBtn),this.playBtn=null)},t.prototype.startAuth=function(){this.hidePoster(),this.model.config.onlyPic?this.mediaPlayer.hide():this.mediaPlayer.show(),this.mediaPlayer.play(),this.mediaPlayer.setPoster(0>this.model.config.posterType+0?this.model.videoSetting.pic:""),this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_AUTH_VALID))},t.prototype.startPlay=function(t){this.log("开始尝试播放"),this.isStartPlay=!1,this.setDefinitionList(),this.getDefaultConfig(this.model.config),this.mediaPlayer.addEventListener(F.EVENT,this.mediaHandler,this),this.facade.addEventListener(M.EVENT,this.skinSateHandler,this),this.facade.addEventListener(B.EVENT,this.videoSateHandler,this),this.mediaPlayer.setContainer(t),this.mediaPlayer.setLoop(this.model.config.loop),this.playVideo(this.start),this.facade.dispatchEvent(new O(B.EVENT,F.CONNECT))},t.prototype.startGslb=function(t){this.gslbplayTime=t,this.gslbLoader=new ee(this.model),this.gslbLoader.addEventListener(U.LOADCMP,this.gslbCmp,this),this.gslbLoader.addEventListener(U.LOADERROR,this.gslbErr,this),this.gslbLoader.translate(),this.facade.dispatchEvent(new O(B.EVENT,B.GSLB_START))},t.prototype.gslbCmp=function(t){this.videoInfo.urls=t.args[1];var e=!0;if(0!=this.model.joint||this.isStartPlay||-2!=this.model.config.posterType||(e="1"==this.model.config.autoplay),this.model.config.onlyPic){var i=this;i.mediaPlayer.show(),setTimeout(function(){i.mediaPlayer.startPlay(i.videoInfo,i.gslbplayTime,e,i.getPlayerType())},10)}else this.mediaPlayer.startPlay(this.videoInfo,this.gslbplayTime,e,this.getPlayerType());this.facade.dispatchEvent(new O(B.EVENT,B.GSLB_CMP))},t.prototype.gslbErr=function(t){this.facade.dispatchEvent(new O(B.EVENT,B.ERROR,t.args[2]))},t.prototype.setAutoReplay=function(t){this.mediaPlayer.setLoop(t)},t.prototype.setDefinition=function(t){this.definition!=t&&-1!=this.model.videoSetting.definitionList.indexOf(t)&&(this.log("切换码流-----------------------------"+t),this.definition=t,this.isStartPlay=!1,this.playVideo(this.mediaPlayer.getTime()),this.facade.dispatchEvent(new O(B.EVENT,F.DEFSTART)))},t.prototype.playVideo=function(t){"pano"!=this.getPlayerType()||a.checkPano()?(this.changeVideoInfo(this.definition),this.mediaPlayer.getVideoEl()&&this.mediaPlayer.getVideoEl().setAttribute("data-rate",n(this.model.videoSetting.definition)),this.startGslb(t)):this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_INFO,[{code:490,message:"该设备还不支持3d功能,建议使用windows和安卓系统下的谷歌浏览器体验该功能"}]))},t.prototype.getDefinitionList=function(){return this.model.videoSetting.definitionList},t.prototype.videoSateHandler=function(t){switch(t.args[1]){case B.VPH:this.isStartPlay&&this.mediaPlayer.pause();break;case F.START:this.isStartPlay=!0,this.model.config.onlyPic&&this.addPoster();break;case F.STOP:case B.ERROR:case F.ERROR:this.isStartPlay=!1;break;case B.FULLSCREEN:this.model.config.onlyPic&&!this.model.videoSetting.fullscreen&&this.mediaPlayer.hide();break;case B.PRESIZE:this.setSize()}},t.prototype.skinSateHandler=function(t){switch(t.args[1]){case M.PLAY:if(this.model.config.onlyPic){var e=this;e.mediaPlayer.show(),setTimeout(function(){e.mediaPlayer.play()},10)}else this.mediaPlayer.play();break;case M.PAUSE:this.mediaPlayer.pause();break;case M.SEEK:this.mediaPlayer.seek(t.args[2]);break;case M.VOLUME:this.model.videoSetting.volume=t.args[2],this.mediaPlayer.setVol(this.model.videoSetting.volume);break;case M.SETDEFINITION:this.setDefinition(t.args[2]);break;case M.REPLAY:this.mediaPlayer.replay()}},t.prototype.getPlayerType=function(){return this.model.config.hasOwnProperty("pano")&&"1"==this.model.config.pano||"1"==this.model.videoSetting.pano?"pano":""},t.prototype.mediaHandler=function(t){switch(t.args[1]){case F.ERROR:if("vod"==this.model.playType&&this.model.vodPlayType&&"ios"==this.model.vodPlayType&&t.args[2][0].retryCdn)return this.model.vodPlayType="mp4",a.setLocal("playType",this.model.vodPlayType),this.log("重新调度"),void this.startGslb(0)}this.facade.dispatchEvent(new O(B.EVENT,t.args[1],t.args[2]))},t.prototype.destroy=function(){this.facade.removeEventListener(M.EVENT,this.skinSateHandler,this),this.facade.removeEventListener(B.EVENT,this.videoSateHandler,this),this.mediaPlayer.removeEventListener(F.EVENT,this.mediaHandler,this),this.mediaPlayer.destroy(),this.facade.dispatchEvent(new O(B.EVENT,F.STOP,!1))},t}(),re=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,I),t.prototype.setUp=function(t){this.player=t,this.addEvents()},t.prototype.addEvents=function(){var t=this;t.addVideoEvent=!1,t.facade.addEventListener(M.EVENT,t.skinSateHandler,t),t.facade.addEventListener(B.EVENT,t.videoSateHandler,t),t.fullChangeFun=a.bindFun(t.fullChange,t),t.resizeFun=a.bindFun(t.resize,t),u.addEvent(document,"fullscreenchange,webkitfullscreenchange,mozfullscreenchange,MSFullscreenChange",t.fullChangeFun),u.addEvent(window,"resize",this.resizeFun),u.addEvent(window,"pagehide",a.bindFun(this.pageHide,this));var e;["webkit","moz","o","ms"].forEach(function(t){"undefined"!=typeof document[t+"Hidden"]&&(e=t)}),u.addEvent(document,e+"visibilitychange",function(){"hidden"==document[e+"VisibilityState"]?t.facade.dispatchEvent(new O(B.EVENT,B.VPH)):"visible"==document[e+"VisibilityState"]&&t.facade.dispatchEvent(new O(B.EVENT,B.VPS))})},t.prototype.videoSateHandler=function(t){switch(t.args[1]){case B.INIT:this.addVideoEvents()}},t.prototype.pageHide=function(){this.facade.dispatchEvent(new O(B.EVENT,B.WPH))},t.prototype.fullChange=function(){this.model.videoSetting&&(this.model.videoSetting.fullscreen=u.isFullScreen(),this.model.videoSetting.fullscreen||(this.cancelFullscreen(),this.resizeFun()),this.facade.dispatchEvent(new O(B.EVENT,B.FULLSCREEN,this.model.videoSetting.fullscreen)))},t.prototype.resize=function(){this.facade.dispatchEvent(new O(B.EVENT,B.PRESIZE))},t.prototype.cancelFullscreen=function(){var t=this.player.skinplugin.skin;t.hasAttribute("tmpStyle")&&(t.setStyle({cssText:t.getAttribute("tmpStyle")}),t.removeAttribute("tmpStyle")),this.bodyTmpOverFlow&&(document.body.style.overflow=this.bodyTmpOverFlow)},t.prototype.addVideoEvents=function(t){t=this.player.videoplugin.mediaPlayer.getVideoEl();var e=this;e.addVideoEvent||(t.addEventListener("webkitbeginfullscreen",function(){e.model.videoSetting.fullscreen=!0,e.facade.dispatchEvent(new O(B.EVENT,B.FULLSCREEN,e.model.videoSetting.fullscreen))}),t.addEventListener("webkitendfullscreen",function(){e.model.videoSetting.fullscreen=!1,e.facade.dispatchEvent(new O(B.EVENT,B.FULLSCREEN,e.model.videoSetting.fullscreen)),e.resizeFun()}),e.addVideoEvent=!0)},t.prototype.skinSateHandler=function(t){switch(t.args[1]){case M.FULLSCREEN:if(t=this.player.videoplugin.mediaPlayer.getVideoEl(),this.model.config.dfull&&t&&t.webkitEnterFullscreen&&"chrome"!=a.getBrowser()){t.webkitEnterFullscreen();break}this.model.videoSetting.fullscreen?(this.model.videoSetting.fullscreen=!1,this.cancelFullscreen(),u.supportFullScreen()&&this.model.config.dfull&&u.cancelFullScreen()):(this.model.videoSetting.fullscreen=!0,this.player.skinplugin.skin.setAttribute({tmpStyle:this.player.skinplugin.el.style.cssText}),u.supportFullScreen()&&this.model.config.dfull?u.fullScreen(this.player.skinplugin.el):(this.bodyTmpOverFlow=document.body.style.overflow,document.body.style.overflow="hidden"),this.player.skinplugin.skin.setStyle({cssText:"background: #000;width:100%;height:100%;position:fixed;top:0;left:0;z-index:1000;overflow:hidden;"})),this.resizeFun()}},t}(),ae=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,I),t.prototype.setUp=function(t,e,i){this.el=e,this._api=i,this.skin=new R(this.el),this.playingStop=!1,this.error=null,this.facade.addEventListener(B.EVENT,this.videoSateHandler,this)},t.prototype.videoSateHandler=function(t){var e=this;switch(t.args[1]){case F.START:case F.BUFFEREFULL:this.skin.setVisible(!1);break;case F.ERROR:case B.ERROR:case B.VIDEO_INFO:if(this.skin.setVisible(!0),!this.model.config.skinnable)break;e.error?e.error.show(t.args[2],e.el,{api:e._api,model:e.model}):r.getPlugin("ErrorInfo",function(i){i&&(e.error=new i,e.error.show(t.args[2],e.el,{api:e._api,model:e.model}))});break;case F.STOP:this.playingStop=!0,this.skin.setVisible(!1);break;case F.PLAYING:this.playingStop&&this.skin.setVisible(!1),this.playingStop=!1;break;case B.VIDEO_LIVESTOP:this.playingStop=!0}},t.prototype.report=function(){},t}(),le=function(){function t(t,e,i){"undefined"!=typeof i.api[t]&&(e[t]=function(){return i.api[t].apply(i.api,arguments)})}return function(e){for(var i=0;i<h.length;i++)t(h[i],this,e)}}(),de=function(){function t(t,i,o){e.prototype[t]=function(){return o[t].apply(o,arguments)}}function e(i){for(this.player=i,i=0;i<h.length;i++)t(h[i],e,this.player.plugin);e.prototype.playNewId=function(t){return this.player.plugin.setLejuData(t)},e.prototype.callFlash=function(t){return this.player.plugin[t.action](t.value)}}return e}(),he=function(){function t(t){this._pl=t}return t.prototype.playNewId=function(t){return this._pl.playNewId(t)},t.prototype.getVideoSetting=function(){for(var t=a.clone(this._pl.model.videoSetting),e={},i=0;i<T.length;i++){var o=T[i];e[o]=t.hasOwnProperty(o)?"definition"==o?this.getDefinition():"defaultDefinition"==o?this.getDefaultDefinition():t[o]:""}return e},t.prototype.getVideoTime=function(){return this._pl.videoplugin?this._pl.videoplugin.mediaPlayer.getTime():0},t.prototype.pauseVideo=function(){this._pl.facade.dispatchEvent(new O(M.EVENT,M.PAUSE))},t.prototype.resumeVideo=function(){this._pl.facade.dispatchEvent(new O(M.EVENT,M.PLAY))},t.prototype.seekTo=function(t){this._pl.facade.dispatchEvent(new O(M.EVENT,M.SEEK,t))},t.prototype.replayVideo=function(){this._pl.facade.dispatchEvent(new O(M.EVENT,M.REPLAY))},t.prototype.closeVideo=function(){this._pl.closeVideo()},t.prototype.setVolume=function(t){this._pl.facade.dispatchEvent(new O(M.EVENT,M.VOLUME,t))},t.prototype.shutDown=function(){this._pl.shutDown()},t.prototype.startUp=function(){this._pl.startUp()},t.prototype.getBufferPercent=function(){return this._pl.videoplugin?this._pl.videoplugin.mediaPlayer.getBufferPercent():0},t.prototype.setDefinition=function(t){t=o(t),this._pl.facade.dispatchEvent(new O(M.EVENT,M.SETDEFINITION,t))},t.prototype.getDefinition=function(){return n(this._pl.model.videoSetting.definition)},t.prototype.getDefaultDefinition=function(){return n(this._pl.model.videoSetting.defaultDefinition)},t.prototype.getDefinitionList=function(){for(var t=[],e=0;e<this._pl.model.videoSetting.definitionList.length;e++){var i=n(this._pl.model.videoSetting.definitionList[e]);t.push(i)}return t},t.prototype.setVideoPercent=function(t){this._pl.skinplugin.setVideoPercent(t)},t.prototype.getVideoPercent=function(){},t.prototype.setVideoScale=function(t){return this._pl.skinplugin.setVideoScale(t),0},t.prototype.getVideoScale=function(){return 0},t.prototype.resetVideoScale=function(){return this._pl.skinplugin.setVideoScale(0),0},t.prototype.fullVideoScale=function(){this._pl.skinplugin.setVideoScale(1)},t.prototype.setVideoRect=function(t){this._pl.skinplugin.setVideoScale(t)},t.prototype.getLoadPercent=function(){return this._pl.videoplugin?this._pl.videoplugin.mediaPlayer.getLoadPercent():void 0},t.prototype.getDownloadSpeed=function(){return 0},t.prototype.getPlayRecord=function(){return this._pl.videoplugin?this._pl.videoplugin.getPlayRecord():void 0},t.prototype.getPlayState=function(){return this._pl.videoplugin?this._pl.videoplugin.getPlayState():void 0},t.prototype.setVideoColor=function(){return-1},t.prototype.getVideoColor=function(){return-1},t.prototype.getVersion=function(){return this._pl.version},t.prototype.setAutoReplay=function(t){return this._pl.videoplugin.setAutoReplay(t)},t.prototype.feedback=function(t){return this._pl.feedback(t)},t.prototype.getLog=function(t){return this._pl.getLog(t)},t.prototype.getServerTime=function(){},t}(),pe={configConver:function(t){var e={dfull:!0,fullscreen:!0,skinnable:!0,controls:!1,loop:!1,definition:!0,autoSize:"0",changeParent:!1,posterType:"1",playsinline:"1",autoplay:"0",onlyPic:!1,playIngBg:!1,dvideoSize:!0,mustAutoplay:!1,pageControls:!1};0>parseInt(t.posterType)&&!t.hasOwnProperty("controls")&&!t.hasOwnProperty("skinnable")&&(t.controls="1",t.skinnable="0");for(var i in e)t.hasOwnProperty(i)?"boolean"==typeof e[i]&&(t[i]="1"==t[i]):t[i]=e[i];switch(t.hasOwnProperty("pa")&&(t.pano=t.pa,delete t.pa),t.hasOwnProperty("auto_play")&&(t.autoplay=t.auto_play,delete t.auto_play),t.hasOwnProperty("autoReplay")&&(t.loop="1"==t.autoReplay,delete t.autoReplay),(1<parseInt(t.autoplay)||0>parseInt(t.autoplay))&&(t.autoplay="0"),(3<parseInt(t.posterType)||-2>parseInt(t.posterType))&&(t.posterType="1"),t.autoplay+="",t.posterType+="",t.hasOwnProperty("rate")&&(t.rate=o(t.rate)),t.onlyPic=!1,t.playIngBg=!0,a.getDevice()){case"androidPhone":case"androidPad":case"android":switch(a.getBrowser()){case"uc":t.skinnable=!1,t.controls=!0;break;default:t.mustAutoplay||(t.autoplay="0")}break;case"iphone":switch(a.getBrowser()){case"uc":t.dfull=!1;break;case"qq":t.onlyPic=!0;break;default:var e=navigator.userAgent.toLowerCase(),n=[/cpu iphone os 8_/];for(i=0;i<n.length;i++)if(n[i].test(e)){t.dvideoSize=!1;break}if(0<=parseInt(t.posterType)&&(n=[/cpu iphone os 7_/,/cpu iphone os 6_/],t.skinnable))for(i=0;i<n.length;i++)if(n[i].test(e)){t.onlyPic=!0;break}}case"ipad":switch(a.getBrowser()){case"qqwebview":case"weixin":e=navigator.userAgent.toLowerCase(),/cpu iphone os 8_/.test(e)&&!t.mustAutoplay&&(t.autoplay="0");break;default:t.mustAutoplay||(t.autoplay="0")}break;case"pc":t.playIngBg=!1}}},ce=function(){function t(){this.init()}return E.inherits(t,L),t.prototype.init=function(){this.api=new he(this)},t.prototype.setUp=function(t,e,i){this.vModelInit=this.canplay=!1,this.model=new z,this.setModelType(),this.model.api=this.getVideoApi(),this.configHanlder(t),this.model.config.refresh(t),this.model.playerConfig.refresh({version:this.version}),this.facade=new x,this.skinplugin=new ne(this.facade,this.model),this.skinplugin.setUp(t,e,i),this.reportplugin=new ie(this.facade,this.model),this.reportplugin.setUp(),this.globalplugin=new re(this.facade,this.model),this.globalplugin.setUp(this),this.errorplugin=new ae(this.facade,this.model),this.errorplugin.setUp(this,this.skinplugin.el.error,this.api),this.addEvents(),this.envCheck()&&this.startGetData()},t.prototype.envCheck=function(){return"1"!=this.model.config.pano||a.checkPano()?!0:(this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_INFO,[{code:490,message:"该设备还不支持3d功能,建议使用window或安卓系统下的谷歌浏览器体验该功能"}])),!1)},t.prototype.setModelType=function(){},t.prototype.configHanlder=function(t){pe.configConver(t)},t.prototype.addEvents=function(){this.facade.addEventListener(M.EVENT,this.skinHandler,this),this.facade.addEventListener(B.EVENT,this.videoHandler,this)},t.prototype.removedEvents=function(){this.facade.removeEventListener(M.EVENT,this.skinHandler,this),this.facade.removeEventListener(B.EVENT,this.videoHandler,this)},t.prototype.startGetData=function(){this.log("开始请求数据"),this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_DATA_START))},t.prototype.dataCmp=function(){this.log("请求GpC成功"),"0"==this.model.videoSetting.isdrm?(this.setupPlayer(),this.vModelInit=!0,"0"==this.model.config.autoplay?this.videoplugin.showPoster():this.videoplugin.startAuth(),this.facade.dispatchEvent(new O(B.EVENT,B.VIDEO_DATA_CMP))):this.facade.dispatchEvent(new O(B.EVENT,B.ERROR,[{code:A.VOD_CONFIG_DRM,message:"视频为加密视频，无法解密播放"}]))},t.prototype.setupPlayer=function(){this.log("开始创建播放器"),this.videoplugin||(this.videoplugin=new se(this.facade,this.model),this.videoplugin.setUp(this.model.videoSetting,this.skinplugin.el.video))},t.prototype.creatVideo=function(){this.log("开始创建视频"),this.videoplugin.startPlay(this.skinplugin.getVideArea())},t.prototype.setupAdplugin=function(){this.model.record.as=a.now(),this.log("开始请求广告"),this.adplugin=new oe(this.facade,this.model),this.facade.addEventListener(H.EVENT,this.adHandler,this),this.adplugin.setUp(this.videoplugin.mediaPlayer,this.skinplugin.el)},t.prototype.errorHanlder=function(t){this.log("数据请求失败"),this.facade.dispatchEvent(new O(B.EVENT,B.ERROR,t.args[1]))},t.prototype.adHandler=function(t){switch(this.log("广告返回"+t.args[1]),t.args[1]){case H.HEADSTART:this.model.joint=2,this.facade.dispatchEvent(new O(B.EVENT,H.HEADSTART));break;case H.HEADEND:this.model.joint=2;case H.NOAD:this.model.joint=0,this.facade.removeEventListener(H.EVENT,this.adHandler,this),this.facade.dispatchEvent(new O(B.EVENT,t.args[1],t.args[2])),this.creatVideo()}},t.prototype.videoHandler=function(t){switch(this.vStateHandler(t),t.args[1]){case B.VIDEO_AUTH_VALID:this.canplay=!0,this.setupAdplugin();break;case B.VIDEO_DATA_START:case B.GSLB_START:case B.GSLB_CMP:case B.VIDEO_DATA_CMP:case F.PLAYING:case F.LODING:return;case B.INIT:"0"!=this.model.config.autoSize&&this.skinplugin.autoSize();break;case B.WPH:return void this.destroy()}if(this.model.config.hasOwnProperty("callbackJs")){var e=t.args[1];t=t.args[2],e==B.ERROR&&(e=F.ERROR),l[this.model.config.callbackJs]&&l[this.model.config.callbackJs](e,t)}},t.prototype.vStateHandler=function(){},t.prototype.skinHandler=function(){},t.prototype.destroy=function(){this.skinplugin&&this.skinplugin.shutDown(),this.globalplugin&&this.globalplugin.destroy(),this.videoplugin&&this.videoplugin.destroy(),this.removedEvents(),this.vModel&&(this.vModel.destroy(),this.vModel=null),this.adplugin&&(this.adplugin.destroy(),this.adplugin=null),this.reportplugin&&this.reportplugin.destroy()},t.prototype.closeVideo=function(){this.videoplugin.destroy()},t.prototype.shutDown=function(){this.destroy(),this.addEvents(),this.videoplugin&&this.videoplugin.showPoster()},t.prototype.startUp=function(){this.log("call startUp -vModelInit:"+this.vModelInit),this.destroy(),this.vModelInit?(this.reportplugin.setUp(),this.addEvents(),this.videoplugin&&this.videoplugin.startAuth()):(this.model.config.autoplay="1",this.reportplugin.setUp(),this.addEvents(),this.startGetData())},t.prototype.playNewId=function(t){var e="";this.destroy(),this.model.clear(),this.setModelType(),this.model.playerConfig.refresh({version:this.version}),this.model.init({deviceId:this.model.lc(),os:a.getOs(),osv:"-",width:window.screen.width,height:window.screen.height,appv:this.version}),this.vModelInit=!1,this.canplay&&!t.hasOwnProperty("autoplay")&&(e="1"),this.configHanlder(t),""!=e&&(t.autoplay=e),this.model.config.refresh(t),this.reportplugin.setUp(),this.addEvents(),this.startGetData()},t.prototype.feedback=function(t){"undefined"==typeof t&&(t={}),t.type="0",t.logcontent=api.getLog(),this.reportplugin.report(t)},t.prototype.getLog=function(){return this.reportplugin.getLog()},t.prototype.getVideoApi=function(){var t=this;return{getVideoInfo:function(){return{time:t.videoplugin.mediaPlayer.getTime()}}}},t}(),ue=function(){function t(){this.superClass.constructor.apply(this,arguments)}return E.inherits(t,ce),t.prototype.init=function(){this.superClass.init.apply(this,arguments),this.version="H5_Vod_20160317_4.1.9"},t.prototype.setModelType=function(){this.model.playType="vod",this.model.videoSetting.gslb=!0,a.isHttps()&&(this.model.videoSetting.gslb=!1)},t.prototype.startGetData=function(){this.superClass.startGetData.apply(this,arguments),this.vModel=new G(this.model),this.vModel.addEventListener(U.LOADCMP,this.dataCmp,this),this.vModel.addEventListener(U.LOADERROR,this.errorHanlder,this),this.vModel.setUp(this.model.config,this.skinplugin)},t}(),fe=function(){function t(t){this.minVer=t}return t.prototype={setUp:function(t,e){var i="http://yuntv.letv.com/bcloud.swf";a.isHttps()&&(i="https://s.yuntv.letv.com/bclouds.swf");var o="Opaque";t.hasOwnProperty("wmode")&&(o=t.wmode,delete t.wmode),"Opaque"==o&&(t.panoType=1),this.id=v.create(e,{url:i,version:this.minVer,wmode:o},this.flashvarsToString(t)),this.plugin=v.getPlayer(this.id),this.api=new de(this)},flashvarsToString:function(t){var e,i="";for(e in t)i+=e+"="+t[e]+"&";return i}},t}(),ye=function(){function t(t){this.init(t)}return t.prototype={init:function(t){switch(this.check(t)){case"swf":this.player=new fe(10);break;default:this.player=new ue}},setUp:function(){this.player.setUp.apply(this.player,arguments)},check:function(t){return t.hasOwnProperty("type")?t.type:t.hasOwnProperty("dbd")&&"LETV"==t.dbd?"h5":"android"!=a.getOs()&&"iphone"!=a.getDevice()&&"ipad"!=a.getDevice()&&v.check(10)?"swf":document.createElement("video").canPlayType?"h5":"swf"}},t}(),ge=function(){function t(t,e){var i="100%",o="100%",n="player"+a.creatUuid();return t.hasOwnProperty("width")&&(isNaN(t.width)?-1!=i.indexOf("%")&&(i=t.width):i=t.width+"px"),t.hasOwnProperty("height")&&(isNaN(t.height)?-1!=o.indexOf("%")&&(o=t.height):o=t.height+"px"),i='<div id="#{player}" style="position: relative;width: {width};height:{height};margin-right:auto;margin-left:auto"></div>'.replace(/{width}/g,i),i=i.replace(/{height}/g,o),i=i.replace(/#{player}/g,n),"string"==typeof e&&""!=e&&u.$E(e)?u.$E(e).innerHTML=i:d.write(i),n}function e(t,e,i){var o=new ye(t);return o.setUp(t,e,i),o.player}function i(){}return E.inherits(i,L),i.prototype.init=function(i,o,n){var s=t(i,o),r=e(i,s,o);if(this.sdk=new le(r),n){var a=function(t){switch(t.args[1]){case B.INIT:r.facade.removeEventListener(B.EVENT,a,this),i.hasOwnProperty("callback")&&("function"==typeof i.callback?i.callback&&i.callback(r.videoplugin.mediaPlayer.player.video):i.callback&&l[i.callback]&&l[i.callback](r.videoplugin.mediaPlayer.player.video))}};r.facade&&r.facade.addEventListener(B.EVENT,a,this)}},i}();if("undefined"!=typeof l.letvcloud_player_conf){var me=new CloudVodPlayer;if(l.letvcloud_player_conf.hasOwnProperty("callbackJs")&&(l.letvcloud_player_conf.callback=l.letvcloud_player_conf.callbackJs,delete l.letvcloud_player_conf.callbackJs),!l.letvcloud_player_conf.hasOwnProperty("posterType")){l.letvcloud_player_conf.posterType="-1";var ve=navigator.userAgent.toLowerCase();-1<ve.indexOf("iphone")&&-1<ve.indexOf("mac")&&-1<ve.indexOf("7.0")&&(l.letvcloud_player_conf.posterType="-2")}me.init(l.letvcloud_player_conf,"",!0),l.letvcloud_player_conf=void 0,l.Util={setRate:function(t){me.sdk.setDefinition(t)},getRate:function(){return me.sdk.getDefinition()}}}i.exports=ge});